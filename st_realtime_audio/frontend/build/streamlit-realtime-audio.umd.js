(function(V,Sn){typeof exports=="object"&&typeof module<"u"?module.exports=Sn(require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["react","react-dom"],Sn):(V=typeof globalThis<"u"?globalThis:V||self,V.StreamlitRealtimeAudio=Sn(V.React,V.ReactDOM))})(this,function(V,Sn){"use strict";function Ka(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zr={exports:{}},In={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var os;function Ga(){if(os)return In;os=1;var n=V,t=Symbol.for("react.element"),e=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,d){var h,f={},m=null,_=null;d!==void 0&&(m=""+d),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(_=c.ref);for(h in c)r.call(c,h)&&!s.hasOwnProperty(h)&&(f[h]=c[h]);if(a&&a.defaultProps)for(h in c=a.defaultProps,c)f[h]===void 0&&(f[h]=c[h]);return{$$typeof:t,type:a,key:m,ref:_,props:f,_owner:i.current}}return In.Fragment=e,In.jsx=o,In.jsxs=o,In}var An={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var as;function Za(){return as||(as=1,process.env.NODE_ENV!=="production"&&function(){var n=V,t=Symbol.for("react.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.for("react.offscreen"),C=Symbol.iterator,pt="@@iterator";function mt(l){if(l===null||typeof l!="object")return null;var p=C&&l[C]||l[pt];return typeof p=="function"?p:null}var X=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function it(l){{for(var p=arguments.length,b=new Array(p>1?p-1:0),I=1;I<p;I++)b[I-1]=arguments[I];ut("error",l,b)}}function ut(l,p,b){{var I=X.ReactDebugCurrentFrame,G=I.getStackAddendum();G!==""&&(p+="%s",b=b.concat([G]));var et=b.map(function($){return String($)});et.unshift("Warning: "+p),Function.prototype.apply.call(console[l],console,et)}}var j=!1,g=!1,se=!1,fn=!1,ze=!1,pn;pn=Symbol.for("react.module.reference");function Yn(l){return!!(typeof l=="string"||typeof l=="function"||l===r||l===s||ze||l===i||l===d||l===h||fn||l===_||j||g||se||typeof l=="object"&&l!==null&&(l.$$typeof===m||l.$$typeof===f||l.$$typeof===o||l.$$typeof===a||l.$$typeof===c||l.$$typeof===pn||l.getModuleId!==void 0))}function Wn(l,p,b){var I=l.displayName;if(I)return I;var G=p.displayName||p.name||"";return G!==""?b+"("+G+")":b}function be(l){return l.displayName||"Context"}function y(l){if(l==null)return null;if(typeof l.tag=="number"&&it("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case r:return"Fragment";case e:return"Portal";case s:return"Profiler";case i:return"StrictMode";case d:return"Suspense";case h:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case a:var p=l;return be(p)+".Consumer";case o:var b=l;return be(b._context)+".Provider";case c:return Wn(l,l.render,"ForwardRef");case f:var I=l.displayName||null;return I!==null?I:y(l.type)||"Memo";case m:{var G=l,et=G._payload,$=G._init;try{return y($(et))}catch{return null}}}return null}var v=Object.assign,st=0,oe,Ye,We,Tt,Hn,Hr,Jr;function qr(){}qr.__reactDisabledLog=!0;function Ki(){{if(st===0){oe=console.log,Ye=console.info,We=console.warn,Tt=console.error,Hn=console.group,Hr=console.groupCollapsed,Jr=console.groupEnd;var l={configurable:!0,enumerable:!0,value:qr,writable:!0};Object.defineProperties(console,{info:l,log:l,warn:l,error:l,group:l,groupCollapsed:l,groupEnd:l})}st++}}function Gi(){{if(st--,st===0){var l={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:v({},l,{value:oe}),info:v({},l,{value:Ye}),warn:v({},l,{value:We}),error:v({},l,{value:Tt}),group:v({},l,{value:Hn}),groupCollapsed:v({},l,{value:Hr}),groupEnd:v({},l,{value:Jr})})}st<0&&it("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var Jn=X.ReactCurrentDispatcher,qn;function yn(l,p,b){{if(qn===void 0)try{throw Error()}catch(G){var I=G.stack.trim().match(/\n( *(at )?)/);qn=I&&I[1]||""}return`
`+qn+l}}var Kn=!1,mn;{var Zi=typeof WeakMap=="function"?WeakMap:Map;mn=new Zi}function w(l,p){if(!l||Kn)return"";{var b=mn.get(l);if(b!==void 0)return b}var I;Kn=!0;var G=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var et;et=Jn.current,Jn.current=null,Ki();try{if(p){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(Et){I=Et}Reflect.construct(l,[],$)}else{try{$.call()}catch(Et){I=Et}l.call($.prototype)}}else{try{throw Error()}catch(Et){I=Et}l()}}catch(Et){if(Et&&I&&typeof Et.stack=="string"){for(var L=Et.stack.split(`
`),vt=I.stack.split(`
`),ct=L.length-1,dt=vt.length-1;ct>=1&&dt>=0&&L[ct]!==vt[dt];)dt--;for(;ct>=1&&dt>=0;ct--,dt--)if(L[ct]!==vt[dt]){if(ct!==1||dt!==1)do if(ct--,dt--,dt<0||L[ct]!==vt[dt]){var Vt=`
`+L[ct].replace(" at new "," at ");return l.displayName&&Vt.includes("<anonymous>")&&(Vt=Vt.replace("<anonymous>",l.displayName)),typeof l=="function"&&mn.set(l,Vt),Vt}while(ct>=1&&dt>=0);break}}}finally{Kn=!1,Jn.current=et,Gi(),Error.prepareStackTrace=G}var _n=l?l.displayName||l.name:"",Je=_n?yn(_n):"";return typeof l=="function"&&mn.set(l,Je),Je}function Gn(l,p,b){return w(l,!1)}function gn(l){var p=l.prototype;return!!(p&&p.isReactComponent)}function He(l,p,b){if(l==null)return"";if(typeof l=="function")return w(l,gn(l));if(typeof l=="string")return yn(l);switch(l){case d:return yn("Suspense");case h:return yn("SuspenseList")}if(typeof l=="object")switch(l.$$typeof){case c:return Gn(l.render);case f:return He(l.type,p,b);case m:{var I=l,G=I._payload,et=I._init;try{return He(et(G),p,b)}catch{}}}return""}var Zn=Object.prototype.hasOwnProperty,Ma={},Na=X.ReactDebugCurrentFrame;function Kr(l){if(l){var p=l._owner,b=He(l.type,l._source,p?p.type:null);Na.setExtraStackFrame(b)}else Na.setExtraStackFrame(null)}function gd(l,p,b,I,G){{var et=Function.call.bind(Zn);for(var $ in l)if(et(l,$)){var L=void 0;try{if(typeof l[$]!="function"){var vt=Error((I||"React class")+": "+b+" type `"+$+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof l[$]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw vt.name="Invariant Violation",vt}L=l[$](p,$,I,b,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ct){L=ct}L&&!(L instanceof Error)&&(Kr(G),it("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",I||"React class",b,$,typeof L),Kr(null)),L instanceof Error&&!(L.message in Ma)&&(Ma[L.message]=!0,Kr(G),it("Failed %s type: %s",b,L.message),Kr(null))}}}var bd=Array.isArray;function Xi(l){return bd(l)}function _d(l){{var p=typeof Symbol=="function"&&Symbol.toStringTag,b=p&&l[Symbol.toStringTag]||l.constructor.name||"Object";return b}}function vd(l){try{return Ca(l),!1}catch{return!0}}function Ca(l){return""+l}function La(l){if(vd(l))return it("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",_d(l)),Ca(l)}var Ua=X.ReactCurrentOwner,wd={key:!0,ref:!0,__self:!0,__source:!0},Pa,ka;function Sd(l){if(Zn.call(l,"ref")){var p=Object.getOwnPropertyDescriptor(l,"ref").get;if(p&&p.isReactWarning)return!1}return l.ref!==void 0}function Id(l){if(Zn.call(l,"key")){var p=Object.getOwnPropertyDescriptor(l,"key").get;if(p&&p.isReactWarning)return!1}return l.key!==void 0}function Ad(l,p){typeof l.ref=="string"&&Ua.current}function Bd(l,p){{var b=function(){Pa||(Pa=!0,it("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",p))};b.isReactWarning=!0,Object.defineProperty(l,"key",{get:b,configurable:!0})}}function Od(l,p){{var b=function(){ka||(ka=!0,it("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",p))};b.isReactWarning=!0,Object.defineProperty(l,"ref",{get:b,configurable:!0})}}var Fd=function(l,p,b,I,G,et,$){var L={$$typeof:t,type:l,key:p,ref:b,props:$,_owner:et};return L._store={},Object.defineProperty(L._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(L,"_self",{configurable:!1,enumerable:!1,writable:!1,value:I}),Object.defineProperty(L,"_source",{configurable:!1,enumerable:!1,writable:!1,value:G}),Object.freeze&&(Object.freeze(L.props),Object.freeze(L)),L};function Dd(l,p,b,I,G){{var et,$={},L=null,vt=null;b!==void 0&&(La(b),L=""+b),Id(p)&&(La(p.key),L=""+p.key),Sd(p)&&(vt=p.ref,Ad(p,G));for(et in p)Zn.call(p,et)&&!wd.hasOwnProperty(et)&&($[et]=p[et]);if(l&&l.defaultProps){var ct=l.defaultProps;for(et in ct)$[et]===void 0&&($[et]=ct[et])}if(L||vt){var dt=typeof l=="function"?l.displayName||l.name||"Unknown":l;L&&Bd($,dt),vt&&Od($,dt)}return Fd(l,L,vt,G,I,Ua.current,$)}}var Qi=X.ReactCurrentOwner,ja=X.ReactDebugCurrentFrame;function bn(l){if(l){var p=l._owner,b=He(l.type,l._source,p?p.type:null);ja.setExtraStackFrame(b)}else ja.setExtraStackFrame(null)}var ts;ts=!1;function es(l){return typeof l=="object"&&l!==null&&l.$$typeof===t}function Va(){{if(Qi.current){var l=y(Qi.current.type);if(l)return`

Check the render method of \``+l+"`."}return""}}function Td(l){return""}var $a={};function Ed(l){{var p=Va();if(!p){var b=typeof l=="string"?l:l.displayName||l.name;b&&(p=`

Check the top-level render call using <`+b+">.")}return p}}function za(l,p){{if(!l._store||l._store.validated||l.key!=null)return;l._store.validated=!0;var b=Ed(p);if($a[b])return;$a[b]=!0;var I="";l&&l._owner&&l._owner!==Qi.current&&(I=" It was passed a child from "+y(l._owner.type)+"."),bn(l),it('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',b,I),bn(null)}}function Ya(l,p){{if(typeof l!="object")return;if(Xi(l))for(var b=0;b<l.length;b++){var I=l[b];es(I)&&za(I,p)}else if(es(l))l._store&&(l._store.validated=!0);else if(l){var G=mt(l);if(typeof G=="function"&&G!==l.entries)for(var et=G.call(l),$;!($=et.next()).done;)es($.value)&&za($.value,p)}}}function xd(l){{var p=l.type;if(p==null||typeof p=="string")return;var b;if(typeof p=="function")b=p.propTypes;else if(typeof p=="object"&&(p.$$typeof===c||p.$$typeof===f))b=p.propTypes;else return;if(b){var I=y(p);gd(b,l.props,"prop",I,l)}else if(p.PropTypes!==void 0&&!ts){ts=!0;var G=y(p);it("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",G||"Unknown")}typeof p.getDefaultProps=="function"&&!p.getDefaultProps.isReactClassApproved&&it("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Rd(l){{for(var p=Object.keys(l.props),b=0;b<p.length;b++){var I=p[b];if(I!=="children"&&I!=="key"){bn(l),it("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",I),bn(null);break}}l.ref!==null&&(bn(l),it("Invalid attribute `ref` supplied to `React.Fragment`."),bn(null))}}var Wa={};function Ha(l,p,b,I,G,et){{var $=Yn(l);if(!$){var L="";(l===void 0||typeof l=="object"&&l!==null&&Object.keys(l).length===0)&&(L+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var vt=Td();vt?L+=vt:L+=Va();var ct;l===null?ct="null":Xi(l)?ct="array":l!==void 0&&l.$$typeof===t?(ct="<"+(y(l.type)||"Unknown")+" />",L=" Did you accidentally export a JSX literal instead of a component?"):ct=typeof l,it("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ct,L)}var dt=Dd(l,p,b,G,et);if(dt==null)return dt;if($){var Vt=p.children;if(Vt!==void 0)if(I)if(Xi(Vt)){for(var _n=0;_n<Vt.length;_n++)Ya(Vt[_n],l);Object.freeze&&Object.freeze(Vt)}else it("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ya(Vt,l)}if(Zn.call(p,"key")){var Je=y(l),Et=Object.keys(p).filter(function(Pd){return Pd!=="key"}),ns=Et.length>0?"{key: someKey, "+Et.join(": ..., ")+": ...}":"{key: someKey}";if(!Wa[Je+ns]){var Ud=Et.length>0?"{"+Et.join(": ..., ")+": ...}":"{}";it(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,ns,Je,Ud,Je),Wa[Je+ns]=!0}}return l===r?Rd(dt):xd(dt),dt}}function Md(l,p,b){return Ha(l,p,b,!0)}function Nd(l,p,b){return Ha(l,p,b,!1)}var Cd=Nd,Ld=Md;An.Fragment=r,An.jsx=Cd,An.jsxs=Ld}()),An}process.env.NODE_ENV==="production"?Zr.exports=Ga():Zr.exports=Za();var U=Zr.exports,Xr,Qn=Sn;if(process.env.NODE_ENV==="production")Xr=Qn.createRoot,Qn.hydrateRoot;else{var cs=Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Xr=function(n,t){cs.usingClientEntryPoint=!0;try{return Qn.createRoot(n,t)}finally{cs.usingClientEntryPoint=!1}}}var Qr={exports:{}},W={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ls;function Xa(){if(ls)return W;ls=1;var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,_=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,pt=n?Symbol.for("react.block"):60121,mt=n?Symbol.for("react.fundamental"):60117,X=n?Symbol.for("react.responder"):60118,it=n?Symbol.for("react.scope"):60119;function ut(g){if(typeof g=="object"&&g!==null){var se=g.$$typeof;switch(se){case t:switch(g=g.type,g){case c:case d:case r:case s:case i:case f:return g;default:switch(g=g&&g.$$typeof,g){case a:case h:case C:case _:case o:return g;default:return se}}case e:return se}}}function j(g){return ut(g)===d}return W.AsyncMode=c,W.ConcurrentMode=d,W.ContextConsumer=a,W.ContextProvider=o,W.Element=t,W.ForwardRef=h,W.Fragment=r,W.Lazy=C,W.Memo=_,W.Portal=e,W.Profiler=s,W.StrictMode=i,W.Suspense=f,W.isAsyncMode=function(g){return j(g)||ut(g)===c},W.isConcurrentMode=j,W.isContextConsumer=function(g){return ut(g)===a},W.isContextProvider=function(g){return ut(g)===o},W.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===t},W.isForwardRef=function(g){return ut(g)===h},W.isFragment=function(g){return ut(g)===r},W.isLazy=function(g){return ut(g)===C},W.isMemo=function(g){return ut(g)===_},W.isPortal=function(g){return ut(g)===e},W.isProfiler=function(g){return ut(g)===s},W.isStrictMode=function(g){return ut(g)===i},W.isSuspense=function(g){return ut(g)===f},W.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===d||g===s||g===i||g===f||g===m||typeof g=="object"&&g!==null&&(g.$$typeof===C||g.$$typeof===_||g.$$typeof===o||g.$$typeof===a||g.$$typeof===h||g.$$typeof===mt||g.$$typeof===X||g.$$typeof===it||g.$$typeof===pt)},W.typeOf=ut,W}var H={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var us;function Qa(){return us||(us=1,process.env.NODE_ENV!=="production"&&function(){var n=typeof Symbol=="function"&&Symbol.for,t=n?Symbol.for("react.element"):60103,e=n?Symbol.for("react.portal"):60106,r=n?Symbol.for("react.fragment"):60107,i=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,o=n?Symbol.for("react.provider"):60109,a=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,m=n?Symbol.for("react.suspense_list"):60120,_=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,pt=n?Symbol.for("react.block"):60121,mt=n?Symbol.for("react.fundamental"):60117,X=n?Symbol.for("react.responder"):60118,it=n?Symbol.for("react.scope"):60119;function ut(w){return typeof w=="string"||typeof w=="function"||w===r||w===d||w===s||w===i||w===f||w===m||typeof w=="object"&&w!==null&&(w.$$typeof===C||w.$$typeof===_||w.$$typeof===o||w.$$typeof===a||w.$$typeof===h||w.$$typeof===mt||w.$$typeof===X||w.$$typeof===it||w.$$typeof===pt)}function j(w){if(typeof w=="object"&&w!==null){var Gn=w.$$typeof;switch(Gn){case t:var gn=w.type;switch(gn){case c:case d:case r:case s:case i:case f:return gn;default:var He=gn&&gn.$$typeof;switch(He){case a:case h:case C:case _:case o:return He;default:return Gn}}case e:return Gn}}}var g=c,se=d,fn=a,ze=o,pn=t,Yn=h,Wn=r,be=C,y=_,v=e,st=s,oe=i,Ye=f,We=!1;function Tt(w){return We||(We=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Hn(w)||j(w)===c}function Hn(w){return j(w)===d}function Hr(w){return j(w)===a}function Jr(w){return j(w)===o}function qr(w){return typeof w=="object"&&w!==null&&w.$$typeof===t}function Ki(w){return j(w)===h}function Gi(w){return j(w)===r}function Jn(w){return j(w)===C}function qn(w){return j(w)===_}function yn(w){return j(w)===e}function Kn(w){return j(w)===s}function mn(w){return j(w)===i}function Zi(w){return j(w)===f}H.AsyncMode=g,H.ConcurrentMode=se,H.ContextConsumer=fn,H.ContextProvider=ze,H.Element=pn,H.ForwardRef=Yn,H.Fragment=Wn,H.Lazy=be,H.Memo=y,H.Portal=v,H.Profiler=st,H.StrictMode=oe,H.Suspense=Ye,H.isAsyncMode=Tt,H.isConcurrentMode=Hn,H.isContextConsumer=Hr,H.isContextProvider=Jr,H.isElement=qr,H.isForwardRef=Ki,H.isFragment=Gi,H.isLazy=Jn,H.isMemo=qn,H.isPortal=yn,H.isProfiler=Kn,H.isStrictMode=mn,H.isSuspense=Zi,H.isValidElementType=ut,H.typeOf=j}()),H}process.env.NODE_ENV==="production"?Qr.exports=Xa():Qr.exports=Qa();var tc=Qr.exports,ti=tc,ec={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},nc={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},rc={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ds={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ei={};ei[ti.ForwardRef]=rc,ei[ti.Memo]=ds;function hs(n){return ti.isMemo(n)?ds:ei[n.$$typeof]||ec}var ic=Object.defineProperty,sc=Object.getOwnPropertyNames,fs=Object.getOwnPropertySymbols,oc=Object.getOwnPropertyDescriptor,ac=Object.getPrototypeOf,ps=Object.prototype;function ys(n,t,e){if(typeof t!="string"){if(ps){var r=ac(t);r&&r!==ps&&ys(n,r,e)}var i=sc(t);fs&&(i=i.concat(fs(t)));for(var s=hs(n),o=hs(t),a=0;a<i.length;++a){var c=i[a];if(!nc[c]&&!(e&&e[c])&&!(o&&o[c])&&!(s&&s[c])){var d=oc(t,c);try{ic(n,c,d)}catch{}}}}return n}var cc=ys;const lc=Ka(cc);function S(n,t,e,r){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(h){try{d(r.next(h))}catch(f){o(f)}}function c(h){try{d(r.throw(h))}catch(f){o(f)}}function d(h){h.done?s(h.value):i(h.value).then(a,c)}d((r=r.apply(n,t||[])).next())})}function ms(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],r=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function M(n){return this instanceof M?(this.v=n,this):new M(n)}function Ht(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e.apply(n,t||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(C){return Promise.resolve(C).then(_,f)}}function a(_,C){r[_]&&(i[_]=function(pt){return new Promise(function(mt,X){s.push([_,pt,mt,X])>1||c(_,pt)})},C&&(i[_]=C(i[_])))}function c(_,C){try{d(r[_](C))}catch(pt){m(s[0][3],pt)}}function d(_){_.value instanceof M?Promise.resolve(_.value.v).then(h,f):m(s[0][2],_)}function h(_){c("next",_)}function f(_){c("throw",_)}function m(_,C){_(C),s.shift(),s.length&&c(s[0][0],s[0][1])}}function tr(n){var t,e;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=n[i]?function(o){return(e=!e)?{value:M(n[i](o)),done:!1}:s?s(o):o}:s}}function Re(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof ms=="function"?ms(n):n[Symbol.iterator](),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(s){e[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},o)}}typeof SuppressedError=="function"&&SuppressedError;const uc=new TextDecoder("utf-8"),ni=n=>uc.decode(n),dc=new TextEncoder,ri=n=>dc.encode(n),[kd,hc]=(()=>{const n=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw n()}return t.asIntN=()=>{throw n()},t.asUintN=()=>{throw n()},typeof BigInt<"u"?[BigInt,!0]:[t,!1]})(),[Bn,jd]=(()=>{const n=()=>{throw new Error("BigInt64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw n()}static from(){throw n()}constructor(){throw n()}}return typeof BigInt64Array<"u"?[BigInt64Array,!0]:[t,!1]})(),[On,Vd]=(()=>{const n=()=>{throw new Error("BigUint64Array is not available in this environment")};class t{static get BYTES_PER_ELEMENT(){return 8}static of(){throw n()}static from(){throw n()}constructor(){throw n()}}return typeof BigUint64Array<"u"?[BigUint64Array,!0]:[t,!1]})(),fc=n=>typeof n=="number",gs=n=>typeof n=="boolean",ht=n=>typeof n=="function",wt=n=>n!=null&&Object(n)===n,ve=n=>wt(n)&&ht(n.then),Fn=n=>wt(n)&&ht(n[Symbol.iterator]),qe=n=>wt(n)&&ht(n[Symbol.asyncIterator]),ii=n=>wt(n)&&wt(n.schema),bs=n=>wt(n)&&"done"in n&&"value"in n,_s=n=>wt(n)&&ht(n.stat)&&fc(n.fd),vs=n=>wt(n)&&si(n.body),er=n=>"_getDOMStream"in n&&"_getNodeStream"in n,pc=n=>wt(n)&&ht(n.abort)&&ht(n.getWriter)&&!er(n),si=n=>wt(n)&&ht(n.cancel)&&ht(n.getReader)&&!er(n),yc=n=>wt(n)&&ht(n.end)&&ht(n.write)&&gs(n.writable)&&!er(n),ws=n=>wt(n)&&ht(n.read)&&ht(n.pipe)&&gs(n.readable)&&!er(n),mc=n=>wt(n)&&ht(n.clear)&&ht(n.bytes)&&ht(n.position)&&ht(n.setPosition)&&ht(n.capacity)&&ht(n.getBufferIdentifier)&&ht(n.createLong),oi=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function gc(n){const t=n[0]?[n[0]]:[];let e,r,i,s;for(let o,a,c=0,d=0,h=n.length;++c<h;){if(o=t[d],a=n[c],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++d]=a);continue}if({byteOffset:e,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,e+i<r||r+s<e){a&&(t[++d]=a);continue}t[d]=new Uint8Array(o.buffer,e,r-e+s)}return t}function Ss(n,t,e=0,r=t.byteLength){const i=n.byteLength,s=new Uint8Array(n.buffer,n.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,e),n}function Jt(n,t){const e=gc(n),r=e.reduce((h,f)=>h+f.byteLength,0);let i,s,o,a=0,c=-1;const d=Math.min(t||Number.POSITIVE_INFINITY,r);for(const h=e.length;++c<h;){if(i=e[c],s=i.subarray(0,Math.min(i.length,d-a)),d<=a+s.length){s.length<i.length?e[c]=i.subarray(s.length):s.length===i.length&&c++,o?Ss(o,s,a):o=s;break}Ss(o||(o=new Uint8Array(d)),s,a),a+=s.length}return[o||new Uint8Array(0),e.slice(c),r-(o?o.byteLength:0)]}function Q(n,t){let e=bs(t)?t.value:t;return e instanceof n?n===Uint8Array?new n(e.buffer,e.byteOffset,e.byteLength):e:e?(typeof e=="string"&&(e=ri(e)),e instanceof ArrayBuffer?new n(e):e instanceof oi?new n(e):mc(e)?Q(n,e.bytes()):ArrayBuffer.isView(e)?e.byteLength<=0?new n(0):new n(e.buffer,e.byteOffset,e.byteLength/n.BYTES_PER_ELEMENT):n.from(e)):new n(0)}const Dn=n=>Q(Int32Array,n),z=n=>Q(Uint8Array,n),ai=n=>(n.next(),n);function*bc(n,t){const e=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof oi?e(t):Fn(t)?t:e(t);return yield*ai(function*(i){let s=null;do s=i.next(yield Q(n,s));while(!s.done)}(r[Symbol.iterator]())),new n}const _c=n=>bc(Uint8Array,n);function Is(n,t){return Ht(this,arguments,function*(){if(ve(t))return yield M(yield M(yield*tr(Re(Is(n,yield M(t))))));const r=function(o){return Ht(this,arguments,function*(){yield yield M(yield M(o))})},i=function(o){return Ht(this,arguments,function*(){yield M(yield*tr(Re(ai(function*(a){let c=null;do c=a.next(yield c==null?void 0:c.value);while(!c.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof oi?r(t):Fn(t)?i(t):qe(t)?t:r(t);return yield M(yield*tr(Re(ai(function(o){return Ht(this,arguments,function*(){let a=null;do a=yield M(o.next(yield yield M(Q(n,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield M(new n)})}const vc=n=>Is(Uint8Array,n);function ci(n,t,e){if(n!==0){e=e.slice(0,t+1);for(let r=-1;++r<=t;)e[r]+=n}return e}function wc(n,t){let e=0;const r=n.length;if(r!==t.length)return!1;if(r>0)do if(n[e]!==t[e])return!1;while(++e<r);return!0}const Lt={fromIterable(n){return nr(Sc(n))},fromAsyncIterable(n){return nr(Ic(n))},fromDOMStream(n){return nr(Ac(n))},fromNodeStream(n){return nr(Oc(n))},toDOMStream(n,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(n,t){throw new Error('"toNodeStream" not available in this environment')}},nr=n=>(n.next(),n);function*Sc(n){let t,e=!1,r=[],i,s,o,a=0;function c(){return s==="peek"?Jt(r,o)[0]:([i,r,a]=Jt(r,o),i)}({cmd:s,size:o}=yield null);const d=_c(n)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?d.next():d.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield c());while(o<a);while(!t)}catch(h){(e=!0)&&typeof d.throw=="function"&&d.throw(h)}finally{e===!1&&typeof d.return=="function"&&d.return(null)}return null}function Ic(n){return Ht(this,arguments,function*(){let e,r=!1,i=[],s,o,a,c=0;function d(){return o==="peek"?Jt(i,a)[0]:([s,i,c]=Jt(i,a),s)}({cmd:o,size:a}=yield yield M(null));const h=vc(n)[Symbol.asyncIterator]();try{do if({done:e,value:s}=Number.isNaN(a-c)?yield M(h.next()):yield M(h.next(a-c)),!e&&s.byteLength>0&&(i.push(s),c+=s.byteLength),e||a<=c)do({cmd:o,size:a}=yield yield M(d()));while(a<c);while(!e)}catch(f){(r=!0)&&typeof h.throw=="function"&&(yield M(h.throw(f)))}finally{r===!1&&typeof h.return=="function"&&(yield M(h.return(new Uint8Array(0))))}return yield M(null)})}function Ac(n){return Ht(this,arguments,function*(){let e=!1,r=!1,i=[],s,o,a,c=0;function d(){return o==="peek"?Jt(i,a)[0]:([s,i,c]=Jt(i,a),s)}({cmd:o,size:a}=yield yield M(null));const h=new Bc(n);try{do if({done:e,value:s}=Number.isNaN(a-c)?yield M(h.read()):yield M(h.read(a-c)),!e&&s.byteLength>0&&(i.push(z(s)),c+=s.byteLength),e||a<=c)do({cmd:o,size:a}=yield yield M(d()));while(a<c);while(!e)}catch(f){(r=!0)&&(yield M(h.cancel(f)))}finally{r===!1?yield M(h.cancel()):n.locked&&h.releaseLock()}return yield M(null)})}class Bc{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return S(this,void 0,void 0,function*(){const{reader:e,source:r}=this;e&&(yield e.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return S(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=z(e)),e})}}const li=(n,t)=>{const e=i=>r([t,i]);let r;return[t,e,new Promise(i=>(r=i)&&n.once(t,e))]};function Oc(n){return Ht(this,arguments,function*(){const e=[];let r="error",i=!1,s=null,o,a,c=0,d=[],h;function f(){return o==="peek"?Jt(d,a)[0]:([h,d,c]=Jt(d,a),h)}if({cmd:o,size:a}=yield yield M(null),n.isTTY)return yield yield M(new Uint8Array(0)),yield M(null);try{e[0]=li(n,"end"),e[1]=li(n,"error");do{if(e[2]=li(n,"readable"),[r,s]=yield M(Promise.race(e.map(_=>_[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-c)?(h=z(n.read(a-c)),h.byteLength<a-c&&(h=z(n.read()))):h=z(n.read()),h.byteLength>0&&(d.push(h),c+=h.byteLength)),i||a<=c)do({cmd:o,size:a}=yield yield M(f()));while(a<c)}while(!i)}finally{yield M(m(e,r==="error"?s:null))}return yield M(null);function m(_,C){return h=d=null,new Promise((pt,mt)=>{for(const[X,it]of _)n.off(X,it);try{const X=n.destroy;X&&X.call(n,C),C=void 0}catch(X){C=X||C}finally{C!=null?mt(C):pt()}})}})}var xt;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(xt||(xt={}));var Rt;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(Rt||(Rt={}));var St;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(St||(St={}));var ce;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(ce||(ce={}));var Y;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(Y||(Y={}));var we;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(we||(we={}));var J;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(J||(J={}));var u;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.Float=3]="Float",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct=13]="Struct",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Dictionary=-1]="Dictionary",n[n.Int8=-2]="Int8",n[n.Int16=-3]="Int16",n[n.Int32=-4]="Int32",n[n.Int64=-5]="Int64",n[n.Uint8=-6]="Uint8",n[n.Uint16=-7]="Uint16",n[n.Uint32=-8]="Uint32",n[n.Uint64=-9]="Uint64",n[n.Float16=-10]="Float16",n[n.Float32=-11]="Float32",n[n.Float64=-12]="Float64",n[n.DateDay=-13]="DateDay",n[n.DateMillisecond=-14]="DateMillisecond",n[n.TimestampSecond=-15]="TimestampSecond",n[n.TimestampMillisecond=-16]="TimestampMillisecond",n[n.TimestampMicrosecond=-17]="TimestampMicrosecond",n[n.TimestampNanosecond=-18]="TimestampNanosecond",n[n.TimeSecond=-19]="TimeSecond",n[n.TimeMillisecond=-20]="TimeMillisecond",n[n.TimeMicrosecond=-21]="TimeMicrosecond",n[n.TimeNanosecond=-22]="TimeNanosecond",n[n.DenseUnion=-23]="DenseUnion",n[n.SparseUnion=-24]="SparseUnion",n[n.IntervalDayTime=-25]="IntervalDayTime",n[n.IntervalYearMonth=-26]="IntervalYearMonth"})(u||(u={}));var le;(function(n){n[n.OFFSET=0]="OFFSET",n[n.DATA=1]="DATA",n[n.VALIDITY=2]="VALIDITY",n[n.TYPE=3]="TYPE"})(le||(le={}));const Fc=void 0;function Tn(n){if(n===null)return"null";if(n===Fc)return"undefined";switch(typeof n){case"number":return`${n}`;case"bigint":return`${n}`;case"string":return`"${n}"`}return typeof n[Symbol.toPrimitive]=="function"?n[Symbol.toPrimitive]("string"):ArrayBuffer.isView(n)?n instanceof Bn||n instanceof On?`[${[...n].map(t=>Tn(t))}]`:`[${n}]`:ArrayBuffer.isView(n)?`[${n}]`:JSON.stringify(n,(t,e)=>typeof e=="bigint"?`${e}`:e)}const Dc=Symbol.for("isArrowBigNum");function $t(n,...t){return t.length===0?Object.setPrototypeOf(Q(this.TypedArray,n),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(n,...t),this.constructor.prototype)}$t.prototype[Dc]=!0,$t.prototype.toJSON=function(){return`"${Me(this)}"`},$t.prototype.valueOf=function(){return As(this)},$t.prototype.toString=function(){return Me(this)},$t.prototype[Symbol.toPrimitive]=function(n="default"){switch(n){case"number":return As(this);case"string":return Me(this);case"default":return ui(this)}return Me(this)};function Ke(...n){return $t.apply(this,n)}function Ge(...n){return $t.apply(this,n)}function En(...n){return $t.apply(this,n)}Object.setPrototypeOf(Ke.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Ge.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(En.prototype,Object.create(Uint32Array.prototype)),Object.assign(Ke.prototype,$t.prototype,{constructor:Ke,signed:!0,TypedArray:Int32Array,BigIntArray:Bn}),Object.assign(Ge.prototype,$t.prototype,{constructor:Ge,signed:!1,TypedArray:Uint32Array,BigIntArray:On}),Object.assign(En.prototype,$t.prototype,{constructor:En,signed:!0,TypedArray:Uint32Array,BigIntArray:On});function As(n){const{buffer:t,byteOffset:e,length:r,signed:i}=n,s=new On(t,e,r),o=i&&s[s.length-1]&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),c=BigInt(0);if(o){for(const d of s)a+=~d*(BigInt(1)<<BigInt(32)*c++);a*=BigInt(-1)}else for(const d of s)a+=d*(BigInt(1)<<BigInt(32)*c++);return a}let Me,ui;hc?(ui=n=>n.byteLength===8?new n.BigIntArray(n.buffer,n.byteOffset,1)[0]:di(n),Me=n=>n.byteLength===8?`${new n.BigIntArray(n.buffer,n.byteOffset,1)[0]}`:di(n)):(Me=di,ui=Me);function di(n){let t="";const e=new Uint32Array(2);let r=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(e[0]=r[s=0];s<o;)r[s++]=e[1]=e[0]/10,e[0]=(e[0]-e[1]*10<<16)+r[s];r[s]=e[1]=e[0]/10,e[0]=e[0]-e[1]*10,t=`${e[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class hi{static new(t,e){switch(e){case!0:return new Ke(t);case!1:return new Ge(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case Bn:return new Ke(t)}return t.byteLength===16?new En(t):new Ge(t)}static signed(t){return new Ke(t)}static unsigned(t){return new Ge(t)}static decimal(t){return new En(t)}constructor(t,e){return hi.new(t,e)}}var Bs,Os,Fs,Ds,Ts,Es,xs,Rs,Ms,Ns,Cs,Ls,Us,Ps,ks,js,Vs,$s,zs;class A{static isNull(t){return(t==null?void 0:t.typeId)===u.Null}static isInt(t){return(t==null?void 0:t.typeId)===u.Int}static isFloat(t){return(t==null?void 0:t.typeId)===u.Float}static isBinary(t){return(t==null?void 0:t.typeId)===u.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===u.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===u.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===u.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===u.Date}static isTime(t){return(t==null?void 0:t.typeId)===u.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===u.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===u.Interval}static isList(t){return(t==null?void 0:t.typeId)===u.List}static isStruct(t){return(t==null?void 0:t.typeId)===u.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===u.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===u.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===u.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===u.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===u.Dictionary}static isDenseUnion(t){return A.isUnion(t)&&t.mode===Rt.Dense}static isSparseUnion(t){return A.isUnion(t)&&t.mode===Rt.Sparse}get typeId(){return u.NONE}}Bs=Symbol.toStringTag,A[Bs]=(n=>(n.children=null,n.ArrayType=Array,n[Symbol.toStringTag]="DataType"))(A.prototype);let Se=class extends A{toString(){return"Null"}get typeId(){return u.Null}};Os=Symbol.toStringTag,Se[Os]=(n=>n[Symbol.toStringTag]="Null")(Se.prototype);class Ie extends A{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return u.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?Bn:On}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Fs=Symbol.toStringTag,Ie[Fs]=(n=>(n.isSigned=null,n.bitWidth=null,n[Symbol.toStringTag]="Int"))(Ie.prototype);class xn extends Ie{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(xn.prototype,"ArrayType",{value:Int32Array});class Rn extends A{constructor(t){super(),this.precision=t}get typeId(){return u.Float}get ArrayType(){switch(this.precision){case St.HALF:return Uint16Array;case St.SINGLE:return Float32Array;case St.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}Ds=Symbol.toStringTag,Rn[Ds]=(n=>(n.precision=null,n[Symbol.toStringTag]="Float"))(Rn.prototype);let rr=class extends A{constructor(){super()}get typeId(){return u.Binary}toString(){return"Binary"}};Ts=Symbol.toStringTag,rr[Ts]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Binary"))(rr.prototype);let ir=class extends A{constructor(){super()}get typeId(){return u.Utf8}toString(){return"Utf8"}};Es=Symbol.toStringTag,ir[Es]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Utf8"))(ir.prototype);let sr=class extends A{constructor(){super()}get typeId(){return u.Bool}toString(){return"Bool"}};xs=Symbol.toStringTag,sr[xs]=(n=>(n.ArrayType=Uint8Array,n[Symbol.toStringTag]="Bool"))(sr.prototype);let or=class extends A{constructor(t,e,r=128){super(),this.scale=t,this.precision=e,this.bitWidth=r}get typeId(){return u.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Rs=Symbol.toStringTag,or[Rs]=(n=>(n.scale=null,n.precision=null,n.ArrayType=Uint32Array,n[Symbol.toStringTag]="Decimal"))(or.prototype);class ar extends A{constructor(t){super(),this.unit=t}get typeId(){return u.Date}toString(){return`Date${(this.unit+1)*32}<${ce[this.unit]}>`}}Ms=Symbol.toStringTag,ar[Ms]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Date"))(ar.prototype);class Mn extends A{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return u.Time}toString(){return`Time${this.bitWidth}<${Y[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return Bn}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Ns=Symbol.toStringTag,Mn[Ns]=(n=>(n.unit=null,n.bitWidth=null,n[Symbol.toStringTag]="Time"))(Mn.prototype);class cr extends A{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return u.Timestamp}toString(){return`Timestamp<${Y[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Cs=Symbol.toStringTag,cr[Cs]=(n=>(n.unit=null,n.timezone=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Timestamp"))(cr.prototype);class lr extends A{constructor(t){super(),this.unit=t}get typeId(){return u.Interval}toString(){return`Interval<${we[this.unit]}>`}}Ls=Symbol.toStringTag,lr[Ls]=(n=>(n.unit=null,n.ArrayType=Int32Array,n[Symbol.toStringTag]="Interval"))(lr.prototype);let ur=class extends A{constructor(t){super(),this.children=[t]}get typeId(){return u.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Us=Symbol.toStringTag,ur[Us]=(n=>(n.children=null,n[Symbol.toStringTag]="List"))(ur.prototype);class gt extends A{constructor(t){super(),this.children=t}get typeId(){return u.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Ps=Symbol.toStringTag,gt[Ps]=(n=>(n.children=null,n[Symbol.toStringTag]="Struct"))(gt.prototype);class dr extends A{constructor(t,e,r){super(),this.mode=t,this.children=r,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return u.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}ks=Symbol.toStringTag,dr[ks]=(n=>(n.mode=null,n.typeIds=null,n.children=null,n.typeIdToChildIndex=null,n.ArrayType=Int8Array,n[Symbol.toStringTag]="Union"))(dr.prototype);let hr=class extends A{constructor(t){super(),this.byteWidth=t}get typeId(){return u.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};js=Symbol.toStringTag,hr[js]=(n=>(n.byteWidth=null,n.ArrayType=Uint8Array,n[Symbol.toStringTag]="FixedSizeBinary"))(hr.prototype);let fr=class extends A{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return u.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Vs=Symbol.toStringTag,fr[Vs]=(n=>(n.children=null,n.listSize=null,n[Symbol.toStringTag]="FixedSizeList"))(fr.prototype);class pr extends A{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return u.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}$s=Symbol.toStringTag,pr[$s]=(n=>(n.children=null,n.keysSorted=null,n[Symbol.toStringTag]="Map_"))(pr.prototype);const Tc=(n=>()=>++n)(-1);class Ze extends A{constructor(t,e,r,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Tc():typeof r=="number"?r:r.low}get typeId(){return u.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}zs=Symbol.toStringTag,Ze[zs]=(n=>(n.id=null,n.indices=null,n.isOrdered=null,n.dictionary=null,n[Symbol.toStringTag]="Dictionary"))(Ze.prototype);function ue(n){const t=n;switch(n.typeId){case u.Decimal:return n.bitWidth/32;case u.Timestamp:return 2;case u.Date:return 1+t.unit;case u.Interval:return 1+t.unit;case u.FixedSizeList:return t.listSize;case u.FixedSizeBinary:return t.byteWidth;default:return 1}}class P{visitMany(t,...e){return t.map((r,i)=>this.visit(r,...e.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return Ec(this,t,e)}getVisitFnByTypeId(t,e=!0){return Xe(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function Ec(n,t,e=!0){return typeof t=="number"?Xe(n,t,e):typeof t=="string"&&t in u?Xe(n,u[t],e):t&&t instanceof A?Xe(n,Ys(t),e):t!=null&&t.type&&t.type instanceof A?Xe(n,Ys(t.type),e):Xe(n,u.NONE,e)}function Xe(n,t,e=!0){let r=null;switch(t){case u.Null:r=n.visitNull;break;case u.Bool:r=n.visitBool;break;case u.Int:r=n.visitInt;break;case u.Int8:r=n.visitInt8||n.visitInt;break;case u.Int16:r=n.visitInt16||n.visitInt;break;case u.Int32:r=n.visitInt32||n.visitInt;break;case u.Int64:r=n.visitInt64||n.visitInt;break;case u.Uint8:r=n.visitUint8||n.visitInt;break;case u.Uint16:r=n.visitUint16||n.visitInt;break;case u.Uint32:r=n.visitUint32||n.visitInt;break;case u.Uint64:r=n.visitUint64||n.visitInt;break;case u.Float:r=n.visitFloat;break;case u.Float16:r=n.visitFloat16||n.visitFloat;break;case u.Float32:r=n.visitFloat32||n.visitFloat;break;case u.Float64:r=n.visitFloat64||n.visitFloat;break;case u.Utf8:r=n.visitUtf8;break;case u.Binary:r=n.visitBinary;break;case u.FixedSizeBinary:r=n.visitFixedSizeBinary;break;case u.Date:r=n.visitDate;break;case u.DateDay:r=n.visitDateDay||n.visitDate;break;case u.DateMillisecond:r=n.visitDateMillisecond||n.visitDate;break;case u.Timestamp:r=n.visitTimestamp;break;case u.TimestampSecond:r=n.visitTimestampSecond||n.visitTimestamp;break;case u.TimestampMillisecond:r=n.visitTimestampMillisecond||n.visitTimestamp;break;case u.TimestampMicrosecond:r=n.visitTimestampMicrosecond||n.visitTimestamp;break;case u.TimestampNanosecond:r=n.visitTimestampNanosecond||n.visitTimestamp;break;case u.Time:r=n.visitTime;break;case u.TimeSecond:r=n.visitTimeSecond||n.visitTime;break;case u.TimeMillisecond:r=n.visitTimeMillisecond||n.visitTime;break;case u.TimeMicrosecond:r=n.visitTimeMicrosecond||n.visitTime;break;case u.TimeNanosecond:r=n.visitTimeNanosecond||n.visitTime;break;case u.Decimal:r=n.visitDecimal;break;case u.List:r=n.visitList;break;case u.Struct:r=n.visitStruct;break;case u.Union:r=n.visitUnion;break;case u.DenseUnion:r=n.visitDenseUnion||n.visitUnion;break;case u.SparseUnion:r=n.visitSparseUnion||n.visitUnion;break;case u.Dictionary:r=n.visitDictionary;break;case u.Interval:r=n.visitInterval;break;case u.IntervalDayTime:r=n.visitIntervalDayTime||n.visitInterval;break;case u.IntervalYearMonth:r=n.visitIntervalYearMonth||n.visitInterval;break;case u.FixedSizeList:r=n.visitFixedSizeList;break;case u.Map:r=n.visitMap;break}if(typeof r=="function")return r;if(!e)return()=>null;throw new Error(`Unrecognized type '${u[t]}'`)}function Ys(n){switch(n.typeId){case u.Null:return u.Null;case u.Int:{const{bitWidth:t,isSigned:e}=n;switch(t){case 8:return e?u.Int8:u.Uint8;case 16:return e?u.Int16:u.Uint16;case 32:return e?u.Int32:u.Uint32;case 64:return e?u.Int64:u.Uint64}return u.Int}case u.Float:switch(n.precision){case St.HALF:return u.Float16;case St.SINGLE:return u.Float32;case St.DOUBLE:return u.Float64}return u.Float;case u.Binary:return u.Binary;case u.Utf8:return u.Utf8;case u.Bool:return u.Bool;case u.Decimal:return u.Decimal;case u.Time:switch(n.unit){case Y.SECOND:return u.TimeSecond;case Y.MILLISECOND:return u.TimeMillisecond;case Y.MICROSECOND:return u.TimeMicrosecond;case Y.NANOSECOND:return u.TimeNanosecond}return u.Time;case u.Timestamp:switch(n.unit){case Y.SECOND:return u.TimestampSecond;case Y.MILLISECOND:return u.TimestampMillisecond;case Y.MICROSECOND:return u.TimestampMicrosecond;case Y.NANOSECOND:return u.TimestampNanosecond}return u.Timestamp;case u.Date:switch(n.unit){case ce.DAY:return u.DateDay;case ce.MILLISECOND:return u.DateMillisecond}return u.Date;case u.Interval:switch(n.unit){case we.DAY_TIME:return u.IntervalDayTime;case we.YEAR_MONTH:return u.IntervalYearMonth}return u.Interval;case u.Map:return u.Map;case u.List:return u.List;case u.Struct:return u.Struct;case u.Union:switch(n.mode){case Rt.Dense:return u.DenseUnion;case Rt.Sparse:return u.SparseUnion}return u.Union;case u.FixedSizeBinary:return u.FixedSizeBinary;case u.FixedSizeList:return u.FixedSizeList;case u.Dictionary:return u.Dictionary}throw new Error(`Unrecognized type '${u[n.typeId]}'`)}P.prototype.visitInt8=null,P.prototype.visitInt16=null,P.prototype.visitInt32=null,P.prototype.visitInt64=null,P.prototype.visitUint8=null,P.prototype.visitUint16=null,P.prototype.visitUint32=null,P.prototype.visitUint64=null,P.prototype.visitFloat16=null,P.prototype.visitFloat32=null,P.prototype.visitFloat64=null,P.prototype.visitDateDay=null,P.prototype.visitDateMillisecond=null,P.prototype.visitTimestampSecond=null,P.prototype.visitTimestampMillisecond=null,P.prototype.visitTimestampMicrosecond=null,P.prototype.visitTimestampNanosecond=null,P.prototype.visitTimeSecond=null,P.prototype.visitTimeMillisecond=null,P.prototype.visitTimeMicrosecond=null,P.prototype.visitTimeNanosecond=null,P.prototype.visitDenseUnion=null,P.prototype.visitSparseUnion=null,P.prototype.visitIntervalDayTime=null,P.prototype.visitIntervalYearMonth=null;const Ws=new Float64Array(1),Qe=new Uint32Array(Ws.buffer);function Hs(n){const t=(n&31744)>>10,e=(n&1023)/1024,r=Math.pow(-1,(n&32768)>>15);switch(t){case 31:return r*(e?Number.NaN:1/0);case 0:return r*(e?6103515625e-14*e:0)}return r*Math.pow(2,t-15)*(1+e)}function xc(n){if(n!==n)return 32256;Ws[0]=n;const t=(Qe[1]&2147483648)>>16&65535;let e=Qe[1]&2146435072,r=0;return e>=1089470464?Qe[0]>0?e=31744:(e=(e&2080374784)>>16,r=(Qe[1]&1048575)>>10):e<=1056964608?(r=1048576+(Qe[1]&1048575),r=1048576+(r<<(e>>20)-998)>>21,e=0):(e=e-1056964608>>10,r=(Qe[1]&1048575)+512>>10),t|e|r&65535}class T extends P{}function R(n){return(t,e,r)=>{if(t.setValid(e,r!=null))return n(t,e,r)}}const Rc=(n,t,e)=>{n[t]=Math.trunc(e/864e5)},fi=(n,t,e)=>{n[t]=Math.trunc(e%4294967296),n[t+1]=Math.trunc(e/4294967296)},Mc=(n,t,e)=>{n[t]=Math.trunc(e*1e3%4294967296),n[t+1]=Math.trunc(e*1e3/4294967296)},Nc=(n,t,e)=>{n[t]=Math.trunc(e*1e6%4294967296),n[t+1]=Math.trunc(e*1e6/4294967296)},Js=(n,t,e,r)=>{if(e+1<t.length){const{[e]:i,[e+1]:s}=t;n.set(r.subarray(0,s-i),i)}},Cc=({offset:n,values:t},e,r)=>{const i=n+e;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},de=({values:n},t,e)=>{n[t]=e},pi=({values:n},t,e)=>{n[t]=e},qs=({values:n},t,e)=>{n[t]=xc(e)},Lc=(n,t,e)=>{switch(n.type.precision){case St.HALF:return qs(n,t,e);case St.SINGLE:case St.DOUBLE:return pi(n,t,e)}},Ks=({values:n},t,e)=>{Rc(n,t,e.valueOf())},Gs=({values:n},t,e)=>{fi(n,t*2,e.valueOf())},Uc=({stride:n,values:t},e,r)=>{t.set(r.subarray(0,n),n*e)},Pc=({values:n,valueOffsets:t},e,r)=>Js(n,t,e,r),kc=({values:n,valueOffsets:t},e,r)=>{Js(n,t,e,ri(r))},jc=(n,t,e)=>{n.type.unit===ce.DAY?Ks(n,t,e):Gs(n,t,e)},Zs=({values:n},t,e)=>fi(n,t*2,e/1e3),Xs=({values:n},t,e)=>fi(n,t*2,e),Qs=({values:n},t,e)=>Mc(n,t*2,e),to=({values:n},t,e)=>Nc(n,t*2,e),Vc=(n,t,e)=>{switch(n.type.unit){case Y.SECOND:return Zs(n,t,e);case Y.MILLISECOND:return Xs(n,t,e);case Y.MICROSECOND:return Qs(n,t,e);case Y.NANOSECOND:return to(n,t,e)}},eo=({values:n},t,e)=>{n[t]=e},no=({values:n},t,e)=>{n[t]=e},ro=({values:n},t,e)=>{n[t]=e},io=({values:n},t,e)=>{n[t]=e},$c=(n,t,e)=>{switch(n.type.unit){case Y.SECOND:return eo(n,t,e);case Y.MILLISECOND:return no(n,t,e);case Y.MICROSECOND:return ro(n,t,e);case Y.NANOSECOND:return io(n,t,e)}},zc=({values:n,stride:t},e,r)=>{n.set(r.subarray(0,t),t*e)},Yc=(n,t,e)=>{const r=n.children[0],i=n.valueOffsets,s=Ut.getVisitFn(r);if(Array.isArray(e))for(let o=-1,a=i[t],c=i[t+1];a<c;)s(r,a++,e[++o]);else for(let o=-1,a=i[t],c=i[t+1];a<c;)s(r,a++,e.get(++o))},Wc=(n,t,e)=>{const r=n.children[0],{valueOffsets:i}=n,s=Ut.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const c=e instanceof Map?e.entries():Object.entries(e);for(const d of c)if(s(r,o,d),++o>=a)break},Hc=(n,t)=>(e,r,i,s)=>r&&e(r,n,t[s]),Jc=(n,t)=>(e,r,i,s)=>r&&e(r,n,t.get(s)),qc=(n,t)=>(e,r,i,s)=>r&&e(r,n,t.get(i.name)),Kc=(n,t)=>(e,r,i,s)=>r&&e(r,n,t[i.name]),Gc=(n,t,e)=>{const r=n.type.children.map(s=>Ut.getVisitFn(s.type)),i=e instanceof Map?qc(t,e):e instanceof q?Jc(t,e):Array.isArray(e)?Hc(t,e):Kc(t,e);n.type.children.forEach((s,o)=>i(r[o],n.children[o],s,o))},Zc=(n,t,e)=>{n.type.mode===Rt.Dense?so(n,t,e):oo(n,t,e)},so=(n,t,e)=>{const r=n.type.typeIdToChildIndex[n.typeIds[t]],i=n.children[r];Ut.visit(i,n.valueOffsets[t],e)},oo=(n,t,e)=>{const r=n.type.typeIdToChildIndex[n.typeIds[t]],i=n.children[r];Ut.visit(i,t,e)},Xc=(n,t,e)=>{var r;(r=n.dictionary)===null||r===void 0||r.set(n.values[t],e)},Qc=(n,t,e)=>{n.type.unit===we.DAY_TIME?ao(n,t,e):co(n,t,e)},ao=({values:n},t,e)=>{n.set(e.subarray(0,2),2*t)},co=({values:n},t,e)=>{n[t]=e[0]*12+e[1]%12},tl=(n,t,e)=>{const{stride:r}=n,i=n.children[0],s=Ut.getVisitFn(i);if(Array.isArray(e))for(let o=-1,a=t*r;++o<r;)s(i,a+o,e[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,e.get(o))};T.prototype.visitBool=R(Cc),T.prototype.visitInt=R(de),T.prototype.visitInt8=R(de),T.prototype.visitInt16=R(de),T.prototype.visitInt32=R(de),T.prototype.visitInt64=R(de),T.prototype.visitUint8=R(de),T.prototype.visitUint16=R(de),T.prototype.visitUint32=R(de),T.prototype.visitUint64=R(de),T.prototype.visitFloat=R(Lc),T.prototype.visitFloat16=R(qs),T.prototype.visitFloat32=R(pi),T.prototype.visitFloat64=R(pi),T.prototype.visitUtf8=R(kc),T.prototype.visitBinary=R(Pc),T.prototype.visitFixedSizeBinary=R(Uc),T.prototype.visitDate=R(jc),T.prototype.visitDateDay=R(Ks),T.prototype.visitDateMillisecond=R(Gs),T.prototype.visitTimestamp=R(Vc),T.prototype.visitTimestampSecond=R(Zs),T.prototype.visitTimestampMillisecond=R(Xs),T.prototype.visitTimestampMicrosecond=R(Qs),T.prototype.visitTimestampNanosecond=R(to),T.prototype.visitTime=R($c),T.prototype.visitTimeSecond=R(eo),T.prototype.visitTimeMillisecond=R(no),T.prototype.visitTimeMicrosecond=R(ro),T.prototype.visitTimeNanosecond=R(io),T.prototype.visitDecimal=R(zc),T.prototype.visitList=R(Yc),T.prototype.visitStruct=R(Gc),T.prototype.visitUnion=R(Zc),T.prototype.visitDenseUnion=R(so),T.prototype.visitSparseUnion=R(oo),T.prototype.visitDictionary=R(Xc),T.prototype.visitInterval=R(Qc),T.prototype.visitIntervalDayTime=R(ao),T.prototype.visitIntervalYearMonth=R(co),T.prototype.visitFixedSizeList=R(tl),T.prototype.visitMap=R(Wc);const Ut=new T,zt=Symbol.for("parent"),tn=Symbol.for("rowIndex");class yi{constructor(t,e){return this[zt]=t,this[tn]=e,new Proxy(this,new nl)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[tn],e=this[zt],r=e.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=It.visit(e.children[s],t);return i}toString(){return`{${[...this].map(([t,e])=>`${Tn(t)}: ${Tn(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new el(this[zt],this[tn])}}class el{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,It.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(yi.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[zt]:{writable:!0,enumerable:!1,configurable:!1,value:null},[tn]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class nl{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[zt].type.children.map(e=>e.name)}has(t,e){return t[zt].type.children.findIndex(r=>r.name===e)!==-1}getOwnPropertyDescriptor(t,e){if(t[zt].type.children.findIndex(r=>r.name===e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const r=t[zt].type.children.findIndex(i=>i.name===e);if(r!==-1){const i=It.visit(t[zt].children[r],t[tn]);return Reflect.set(t,e,i),i}}set(t,e,r){const i=t[zt].type.children.findIndex(s=>s.name===e);return i!==-1?(Ut.visit(t[zt].children[i],t[tn],r),Reflect.set(t,e,r)):Reflect.has(t,e)||typeof e=="symbol"?Reflect.set(t,e,r):!1}}class B extends P{}function E(n){return(t,e)=>t.getValid(e)?n(t,e):null}const rl=(n,t)=>864e5*n[t],mi=(n,t)=>4294967296*n[t+1]+(n[t]>>>0),il=(n,t)=>4294967296*(n[t+1]/1e3)+(n[t]>>>0)/1e3,sl=(n,t)=>4294967296*(n[t+1]/1e6)+(n[t]>>>0)/1e6,lo=n=>new Date(n),ol=(n,t)=>lo(rl(n,t)),al=(n,t)=>lo(mi(n,t)),cl=(n,t)=>null,uo=(n,t,e)=>{if(e+1>=t.length)return null;const r=t[e],i=t[e+1];return n.subarray(r,i)},ll=({offset:n,values:t},e)=>{const r=n+e;return(t[r>>3]&1<<r%8)!==0},ho=({values:n},t)=>ol(n,t),fo=({values:n},t)=>al(n,t*2),Ae=({stride:n,values:t},e)=>t[n*e],ul=({stride:n,values:t},e)=>Hs(t[n*e]),po=({values:n},t)=>n[t],dl=({stride:n,values:t},e)=>t.subarray(n*e,n*(e+1)),hl=({values:n,valueOffsets:t},e)=>uo(n,t,e),fl=({values:n,valueOffsets:t},e)=>{const r=uo(n,t,e);return r!==null?ni(r):null},pl=({values:n},t)=>n[t],yl=({type:n,values:t},e)=>n.precision!==St.HALF?t[e]:Hs(t[e]),ml=(n,t)=>n.type.unit===ce.DAY?ho(n,t):fo(n,t),yo=({values:n},t)=>1e3*mi(n,t*2),mo=({values:n},t)=>mi(n,t*2),go=({values:n},t)=>il(n,t*2),bo=({values:n},t)=>sl(n,t*2),gl=(n,t)=>{switch(n.type.unit){case Y.SECOND:return yo(n,t);case Y.MILLISECOND:return mo(n,t);case Y.MICROSECOND:return go(n,t);case Y.NANOSECOND:return bo(n,t)}},_o=({values:n},t)=>n[t],vo=({values:n},t)=>n[t],wo=({values:n},t)=>n[t],So=({values:n},t)=>n[t],bl=(n,t)=>{switch(n.type.unit){case Y.SECOND:return _o(n,t);case Y.MILLISECOND:return vo(n,t);case Y.MICROSECOND:return wo(n,t);case Y.NANOSECOND:return So(n,t)}},_l=({values:n,stride:t},e)=>hi.decimal(n.subarray(t*e,t*(e+1))),vl=(n,t)=>{const{valueOffsets:e,stride:r,children:i}=n,{[t*r]:s,[t*r+1]:o}=e,c=i[0].slice(s,o-s);return new q([c])},wl=(n,t)=>{const{valueOffsets:e,children:r}=n,{[t]:i,[t+1]:s}=e,o=r[0];return new gi(o.slice(i,s-i))},Sl=(n,t)=>new yi(n,t),Il=(n,t)=>n.type.mode===Rt.Dense?Io(n,t):Ao(n,t),Io=(n,t)=>{const e=n.type.typeIdToChildIndex[n.typeIds[t]],r=n.children[e];return It.visit(r,n.valueOffsets[t])},Ao=(n,t)=>{const e=n.type.typeIdToChildIndex[n.typeIds[t]],r=n.children[e];return It.visit(r,t)},Al=(n,t)=>{var e;return(e=n.dictionary)===null||e===void 0?void 0:e.get(n.values[t])},Bl=(n,t)=>n.type.unit===we.DAY_TIME?Bo(n,t):Oo(n,t),Bo=({values:n},t)=>n.subarray(2*t,2*(t+1)),Oo=({values:n},t)=>{const e=n[t],r=new Int32Array(2);return r[0]=Math.trunc(e/12),r[1]=Math.trunc(e%12),r},Ol=(n,t)=>{const{stride:e,children:r}=n,s=r[0].slice(t*e,e);return new q([s])};B.prototype.visitNull=E(cl),B.prototype.visitBool=E(ll),B.prototype.visitInt=E(pl),B.prototype.visitInt8=E(Ae),B.prototype.visitInt16=E(Ae),B.prototype.visitInt32=E(Ae),B.prototype.visitInt64=E(po),B.prototype.visitUint8=E(Ae),B.prototype.visitUint16=E(Ae),B.prototype.visitUint32=E(Ae),B.prototype.visitUint64=E(po),B.prototype.visitFloat=E(yl),B.prototype.visitFloat16=E(ul),B.prototype.visitFloat32=E(Ae),B.prototype.visitFloat64=E(Ae),B.prototype.visitUtf8=E(fl),B.prototype.visitBinary=E(hl),B.prototype.visitFixedSizeBinary=E(dl),B.prototype.visitDate=E(ml),B.prototype.visitDateDay=E(ho),B.prototype.visitDateMillisecond=E(fo),B.prototype.visitTimestamp=E(gl),B.prototype.visitTimestampSecond=E(yo),B.prototype.visitTimestampMillisecond=E(mo),B.prototype.visitTimestampMicrosecond=E(go),B.prototype.visitTimestampNanosecond=E(bo),B.prototype.visitTime=E(bl),B.prototype.visitTimeSecond=E(_o),B.prototype.visitTimeMillisecond=E(vo),B.prototype.visitTimeMicrosecond=E(wo),B.prototype.visitTimeNanosecond=E(So),B.prototype.visitDecimal=E(_l),B.prototype.visitList=E(vl),B.prototype.visitStruct=E(Sl),B.prototype.visitUnion=E(Il),B.prototype.visitDenseUnion=E(Io),B.prototype.visitSparseUnion=E(Ao),B.prototype.visitDictionary=E(Al),B.prototype.visitInterval=E(Bl),B.prototype.visitIntervalDayTime=E(Bo),B.prototype.visitIntervalYearMonth=E(Oo),B.prototype.visitFixedSizeList=E(Ol),B.prototype.visitMap=E(wl);const It=new B,qt=Symbol.for("keys"),en=Symbol.for("vals");class gi{constructor(t){return this[qt]=new q([t.children[0]]).memoize(),this[en]=t.children[1],new Proxy(this,new Dl)}[Symbol.iterator](){return new Fl(this[qt],this[en])}get size(){return this[qt].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[qt],e=this[en],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=It.visit(e,i);return r}toString(){return`{${[...this].map(([t,e])=>`${Tn(t)}: ${Tn(e)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Fl{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),It.visit(this.vals,t)]})}}class Dl{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[qt].toArray().map(String)}has(t,e){return t[qt].includes(e)}getOwnPropertyDescriptor(t,e){if(t[qt].indexOf(e)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const r=t[qt].indexOf(e);if(r!==-1){const i=It.visit(Reflect.get(t,en),r);return Reflect.set(t,e,i),i}}set(t,e,r){const i=t[qt].indexOf(e);return i!==-1?(Ut.visit(Reflect.get(t,en),i,r),Reflect.set(t,e,r)):Reflect.has(t,e)?Reflect.set(t,e,r):!1}}Object.defineProperties(gi.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[qt]:{writable:!0,enumerable:!1,configurable:!1,value:null},[en]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Fo;function Do(n,t,e,r){const{length:i=0}=n;let s=typeof t!="number"?0:t,o=typeof e!="number"?i:e;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Fo=s,s=o,o=Fo),o>i&&(o=i),r?r(n,s,o):[s,o]}const To=n=>n!==n;function nn(n){if(typeof n!=="object"||n===null)return To(n)?To:e=>e===n;if(n instanceof Date){const e=n.valueOf();return r=>r instanceof Date?r.valueOf()===e:!1}return ArrayBuffer.isView(n)?e=>e?wc(n,e):!1:n instanceof Map?El(n):Array.isArray(n)?Tl(n):n instanceof q?xl(n):Rl(n,!0)}function Tl(n){const t=[];for(let e=-1,r=n.length;++e<r;)t[e]=nn(n[e]);return yr(t)}function El(n){let t=-1;const e=[];for(const r of n.values())e[++t]=nn(r);return yr(e)}function xl(n){const t=[];for(let e=-1,r=n.length;++e<r;)t[e]=nn(n.get(e));return yr(t)}function Rl(n,t=!1){const e=Object.keys(n);if(!t&&e.length===0)return()=>!1;const r=[];for(let i=-1,s=e.length;++i<s;)r[i]=nn(n[e[i]]);return yr(r,e)}function yr(n,t){return e=>{if(!e||typeof e!="object")return!1;switch(e.constructor){case Array:return Ml(n,e);case Map:return Eo(n,e,e.keys());case gi:case yi:case Object:case void 0:return Eo(n,e,t||Object.keys(e))}return e instanceof q?Nl(n,e):!1}}function Ml(n,t){const e=n.length;if(t.length!==e)return!1;for(let r=-1;++r<e;)if(!n[r](t[r]))return!1;return!0}function Nl(n,t){const e=n.length;if(t.length!==e)return!1;for(let r=-1;++r<e;)if(!n[r](t.get(r)))return!1;return!0}function Eo(n,t,e){const r=e[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=n.length;let c=s.next(),d=r.next(),h=i.next();for(;o<a&&!d.done&&!h.done&&!c.done&&!(d.value!==h.value||!n[o](c.value));++o,d=r.next(),h=i.next(),c=s.next());return o===a&&d.done&&h.done&&c.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function xo(n,t,e,r){return(e&1<<r)!==0}function Cl(n,t,e,r){return(e&1<<r)>>r}function bi(n,t,e){const r=e.byteLength+7&-8;if(n>0||e.byteLength<r){const i=new Uint8Array(r);return i.set(n%8===0?e.subarray(n>>3):mr(new _i(e,n,t,null,xo)).subarray(0,r)),i}return e}function mr(n){const t=[];let e=0,r=0,i=0;for(const o of n)o&&(i|=1<<r),++r===8&&(t[e++]=i,i=r=0);(e===0||r>0)&&(t[e++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class _i{constructor(t,e,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function vi(n,t,e){if(e-t<=0)return 0;if(e-t<8){let s=0;for(const o of new _i(n,t,e-t,n,Cl))s+=o;return s}const r=e>>3<<3,i=t+(t%8===0?0:8-t%8);return vi(n,t,i)+vi(n,r,e)+Ll(n,i>>3,r-i>>3)}function Ll(n,t,e){let r=0,i=Math.trunc(t);const s=new DataView(n.buffer,n.byteOffset,n.byteLength),o=e===void 0?n.byteLength:i+e;for(;o-i>=4;)r+=wi(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=wi(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=wi(s.getUint8(i)),i+=1;return r}function wi(n){let t=Math.trunc(n);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Ul=-1;class nt{constructor(t,e,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let c;s instanceof nt?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=ue(t),s&&((c=s[0])&&(this.valueOffsets=c),(c=s[1])&&(this.values=c),(c=s[2])&&(this.nullBitmap=c),(c=s[3])&&(this.typeIds=c))),this.nullable=this._nullCount!==0&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:r,nullBitmap:i,typeIds:s}=this;return e&&(t+=e.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){let t=this._nullCount,e;return t<=Ul&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-vi(e,this.offset,this.offset+this.length)),t}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return(this.nullBitmap[e>>3]&1<<e%8)!==0}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:c}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:c,_nullCount:0})}const{nullBitmap:r,offset:i}=this,s=i+t>>3,o=(i+t)%8,a=r[s]>>o&1;return e?a===0&&(r[s]|=1<<o,this._nullCount=this.nullCount+1):a===1&&(r[s]&=~(1<<o),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new nt(t,e,r,i,s,o,this.dictionary)}slice(t,e){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,c=this._sliceBuffers(t,e,r,i);return this.clone(this.type,this.offset+t,e,o,c,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===u.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(e&-8))-1,r>0&&i.set(bi(this.offset,e,this.nullBitmap),0);const s=this.buffers;return s[le.VALIDITY]=i,this.clone(this.type,0,t,r+(t-e),s)}_sliceBuffers(t,e,r,i){let s;const{buffers:o}=this;return(s=o[le.TYPE])&&(o[le.TYPE]=s.subarray(t,t+e)),(s=o[le.OFFSET])&&(o[le.OFFSET]=s.subarray(t,t+e+1))||(s=o[le.DATA])&&(o[le.DATA]=i===6?s:s.subarray(r*t,r*(t+e))),o}_sliceChildren(t,e,r){return t.map(i=>i.slice(e,r))}}nt.prototype.children=Object.freeze([]);class Nn extends P{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:e,["offset"]:r=0,["length"]:i=0}=t;return new nt(e,r,i,0)}visitBool(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.data),s=z(t.nullBitmap),o=Dn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,r,a,c,[o,i,s])}visitBinary(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.data),s=z(t.nullBitmap),o=Dn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,r,a,c,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:e,["offset"]:r=0,["child"]:i}=t,s=z(t.nullBitmap),o=Dn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,r,a,c,[o,void 0,s],[i])}visitStruct(t){const{["type"]:e,["offset"]:r=0,["children"]:i=[]}=t,s=z(t.nullBitmap),{length:o=i.reduce((c,{length:d})=>Math.max(c,d),0),nullCount:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:e,["offset"]:r=0,["children"]:i=[]}=t,s=z(t.nullBitmap),o=Q(e.ArrayType,t.typeIds),{["length"]:a=o.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;if(A.isSparseUnion(e))return new nt(e,r,a,c,[void 0,void 0,s,o],i);const d=Dn(t.valueOffsets);return new nt(e,r,a,c,[d,void 0,s,o],i)}visitDictionary(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.indices.ArrayType,t.data),{["dictionary"]:o=new q([new Nn().visit({type:e.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,r,a,c,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:e,["offset"]:r=0}=t,i=z(t.nullBitmap),s=Q(e.ArrayType,t.data),{["length"]:o=s.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:e,["offset"]:r=0,["child"]:i=new Nn().visit({type:e.valueType})}=t,s=z(t.nullBitmap),{["length"]:o=i.length/ue(e),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new nt(e,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:e,["offset"]:r=0,["child"]:i=new Nn().visit({type:e.childType})}=t,s=z(t.nullBitmap),o=Dn(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:c=t.nullBitmap?-1:0}=t;return new nt(e,r,a,c,[o,void 0,s],[i])}}function k(n){return new Nn().visit(n)}class Ro{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Mo(n){return n.reduce((t,e)=>t+e.nullCount,0)}function No(n){return n.reduce((t,e,r)=>(t[r+1]=t[r]+e.length,t),new Uint32Array(n.length+1))}function Co(n,t,e,r){const i=[];for(let s=-1,o=n.length;++s<o;){const a=n[s],c=t[s],{length:d}=a;if(c>=r)break;if(e>=c+d)continue;if(c>=e&&c+d<=r){i.push(a);continue}const h=Math.max(0,e-c),f=Math.min(r-c,d);i.push(a.slice(h,f-h))}return i.length===0&&i.push(n[0].slice(0,0)),i}function Si(n,t,e,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return e<t[o]?r(n,i,e-t[i]):null;s=i+Math.trunc((o-i)*.5),e<t[s]?o=s:i=s}while(i<o)}function Ii(n,t){return n.getValid(t)}function rn(n){function t(e,r,i){return n(e[r],i)}return function(e){const r=this.data;return Si(r,this._offsets,e,t)}}function Lo(n){let t;function e(r,i,s){return n(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=Si(s,this._offsets,r,e);return t=void 0,o}}function Uo(n){let t;function e(r,i,s){let o=s,a=0,c=0;for(let d=i-1,h=r.length;++d<h;){const f=r[d];if(~(a=n(f,t,o)))return c+a;o=0,c+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?e(s,0,0):Si(s,this._offsets,i,e);return t=void 0,o}}class O extends P{}function Pl(n,t){return t===null&&n.length>0?0:-1}function kl(n,t){const{nullBitmap:e}=n;if(!e||n.nullCount<=0)return-1;let r=0;for(const i of new _i(e,n.offset+(t||0),n.length,e,xo)){if(!i)return r;++r}return-1}function N(n,t,e){if(t===void 0)return-1;if(t===null)return kl(n,e);const r=It.getVisitFn(n),i=nn(t);for(let s=(e||0)-1,o=n.length;++s<o;)if(i(r(n,s)))return s;return-1}function Po(n,t,e){const r=It.getVisitFn(n),i=nn(t);for(let s=(e||0)-1,o=n.length;++s<o;)if(i(r(n,s)))return s;return-1}O.prototype.visitNull=Pl,O.prototype.visitBool=N,O.prototype.visitInt=N,O.prototype.visitInt8=N,O.prototype.visitInt16=N,O.prototype.visitInt32=N,O.prototype.visitInt64=N,O.prototype.visitUint8=N,O.prototype.visitUint16=N,O.prototype.visitUint32=N,O.prototype.visitUint64=N,O.prototype.visitFloat=N,O.prototype.visitFloat16=N,O.prototype.visitFloat32=N,O.prototype.visitFloat64=N,O.prototype.visitUtf8=N,O.prototype.visitBinary=N,O.prototype.visitFixedSizeBinary=N,O.prototype.visitDate=N,O.prototype.visitDateDay=N,O.prototype.visitDateMillisecond=N,O.prototype.visitTimestamp=N,O.prototype.visitTimestampSecond=N,O.prototype.visitTimestampMillisecond=N,O.prototype.visitTimestampMicrosecond=N,O.prototype.visitTimestampNanosecond=N,O.prototype.visitTime=N,O.prototype.visitTimeSecond=N,O.prototype.visitTimeMillisecond=N,O.prototype.visitTimeMicrosecond=N,O.prototype.visitTimeNanosecond=N,O.prototype.visitDecimal=N,O.prototype.visitList=N,O.prototype.visitStruct=N,O.prototype.visitUnion=N,O.prototype.visitDenseUnion=Po,O.prototype.visitSparseUnion=Po,O.prototype.visitDictionary=N,O.prototype.visitInterval=N,O.prototype.visitIntervalDayTime=N,O.prototype.visitIntervalYearMonth=N,O.prototype.visitFixedSizeList=N,O.prototype.visitMap=N;const gr=new O;class F extends P{}function x(n){const{type:t}=n;if(n.nullCount===0&&n.stride===1&&(t.typeId===u.Timestamp||t instanceof Ie&&t.bitWidth!==64||t instanceof Mn&&t.bitWidth!==64||t instanceof Rn&&t.precision!==St.HALF))return new Ro(n.data.length,r=>{const i=n.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let e=0;return new Ro(n.data.length,r=>{const s=n.data[r].length,o=n.slice(e,e+s);return e+=s,new jl(o)})}class jl{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}F.prototype.visitNull=x,F.prototype.visitBool=x,F.prototype.visitInt=x,F.prototype.visitInt8=x,F.prototype.visitInt16=x,F.prototype.visitInt32=x,F.prototype.visitInt64=x,F.prototype.visitUint8=x,F.prototype.visitUint16=x,F.prototype.visitUint32=x,F.prototype.visitUint64=x,F.prototype.visitFloat=x,F.prototype.visitFloat16=x,F.prototype.visitFloat32=x,F.prototype.visitFloat64=x,F.prototype.visitUtf8=x,F.prototype.visitBinary=x,F.prototype.visitFixedSizeBinary=x,F.prototype.visitDate=x,F.prototype.visitDateDay=x,F.prototype.visitDateMillisecond=x,F.prototype.visitTimestamp=x,F.prototype.visitTimestampSecond=x,F.prototype.visitTimestampMillisecond=x,F.prototype.visitTimestampMicrosecond=x,F.prototype.visitTimestampNanosecond=x,F.prototype.visitTime=x,F.prototype.visitTimeSecond=x,F.prototype.visitTimeMillisecond=x,F.prototype.visitTimeMicrosecond=x,F.prototype.visitTimeNanosecond=x,F.prototype.visitDecimal=x,F.prototype.visitList=x,F.prototype.visitStruct=x,F.prototype.visitUnion=x,F.prototype.visitDenseUnion=x,F.prototype.visitSparseUnion=x,F.prototype.visitDictionary=x,F.prototype.visitInterval=x,F.prototype.visitIntervalDayTime=x,F.prototype.visitIntervalYearMonth=x,F.prototype.visitFixedSizeList=x,F.prototype.visitMap=x;const Ai=new F,Vl=(n,t)=>n+t;class Be extends P{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return(t.type.unit+1)*4}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===Y.SECOND?4:8}visitInterval(t,e){return(t.type.unit+1)*4}visitStruct(t,e){return t.children.reduce((r,i)=>r+Kt.visit(i,e),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce((r,i)=>r+Kt.visit(i,e),0)}visitDictionary(t,e){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[e]))||0)}}const $l=({valueOffsets:n},t)=>8+(n[t+1]-n[t]),zl=({valueOffsets:n},t)=>8+(n[t+1]-n[t]),Yl=({valueOffsets:n,stride:t,children:e},r)=>{const i=e[0],{[r*t]:s}=n,{[r*t+1]:o}=n,a=Kt.getVisitFn(i.type),c=i.slice(s,o-s);let d=8;for(let h=-1,f=o-s;++h<f;)d+=a(c,h);return d},Wl=({stride:n,children:t},e)=>{const r=t[0],i=r.slice(e*n,n),s=Kt.getVisitFn(r.type);let o=0;for(let a=-1,c=i.length;++a<c;)o+=s(i,a);return o},Hl=(n,t)=>n.type.mode===Rt.Dense?ko(n,t):jo(n,t),ko=({type:n,children:t,typeIds:e,valueOffsets:r},i)=>{const s=n.typeIdToChildIndex[e[i]];return 8+Kt.visit(t[s],r[i])},jo=({children:n},t)=>4+Kt.visitMany(n,n.map(()=>t)).reduce(Vl,0);Be.prototype.visitUtf8=$l,Be.prototype.visitBinary=zl,Be.prototype.visitList=Yl,Be.prototype.visitFixedSizeList=Wl,Be.prototype.visitUnion=Hl,Be.prototype.visitDenseUnion=ko,Be.prototype.visitSparseUnion=jo;const Kt=new Be;var Vo;const $o={},zo={};class q{constructor(t){var e,r,i;const s=t[0]instanceof q?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof nt)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(e=s[0])===null||e===void 0?void 0:e.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:c,indexOf:d,byteLength:h}=$o[o.typeId],f=s[0];this.isValid=m=>Ii(f,m),this.get=m=>a(f,m),this.set=(m,_)=>c(f,m,_),this.indexOf=m=>d(f,m),this.getByteLength=m=>h(f,m),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,zo[o.typeId]),this._offsets=No(s);break}this.data=s,this.type=o,this.stride=ue(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return this._byteLength===-1&&(this._byteLength=this.data.reduce((t,e)=>t+e.byteLength,0)),this._byteLength}get nullCount(){return this._nullCount===-1&&(this._nullCount=Mo(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${u[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Ai.visit(this)}concat(...t){return new q(this.data.concat(t.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new q(Do(this,t,e,({data:r,_offsets:i},s,o)=>Co(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case u.Int:case u.Float:case u.Decimal:case u.Time:case u.Timestamp:switch(e.length){case 0:return new s;case 1:return e[0].values.subarray(0,r*i);default:return e.reduce((o,{values:a,length:c})=>(o.array.set(a.subarray(0,c*i),o.offset),o.offset+=c*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt((e=this.type.children)===null||e===void 0?void 0:e.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new q(this.data.map(({children:e})=>e[t])):null}get isMemoized(){return A.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(A.isDictionary(this.type)){const t=new br(this.data[0].dictionary),e=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new q(e)}return new br(this)}unmemoize(){if(A.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new q(e)}return this}}Vo=Symbol.toStringTag,q[Vo]=(n=>{n.type=A.prototype,n.data=[],n.length=0,n.stride=1,n.numChildren=0,n._nullCount=-1,n._byteLength=-1,n._offsets=new Uint32Array([0]),n[Symbol.isConcatSpreadable]=!0;const t=Object.keys(u).map(e=>u[e]).filter(e=>typeof e=="number"&&e!==u.NONE);for(const e of t){const r=It.getVisitFnByTypeId(e),i=Ut.getVisitFnByTypeId(e),s=gr.getVisitFnByTypeId(e),o=Kt.getVisitFnByTypeId(e);$o[e]={get:r,set:i,indexOf:s,byteLength:o},zo[e]=Object.create(n,{isValid:{value:rn(Ii)},get:{value:rn(It.getVisitFnByTypeId(e))},set:{value:Lo(Ut.getVisitFnByTypeId(e))},indexOf:{value:Uo(gr.getVisitFnByTypeId(e))},getByteLength:{value:rn(Kt.getVisitFnByTypeId(e))}})}return"Vector"})(q.prototype);class br extends q{constructor(t){super(t.data);const e=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const c=e.call(this,o);return s[o]=c,c}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new br(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new q(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Bi{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,r,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(r),t.writeInt64(e),t.offset()}}const Oi=2,Gt=4,he=4,tt=4,Oe=new Int32Array(2),Yo=new Float32Array(Oe.buffer),Wo=new Float64Array(Oe.buffer),_r=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;let fe=class rs{constructor(t,e){this.low=t|0,this.high=e|0}static create(t,e){return t==0&&e==0?rs.ZERO:new rs(t,e)}toFloat64(){return(this.low>>>0)+this.high*4294967296}equals(t){return this.low==t.low&&this.high==t.high}};fe.ZERO=new fe(0,0);var Fi;(function(n){n[n.UTF8_BYTES=1]="UTF8_BYTES",n[n.UTF16_STRING=2]="UTF16_STRING"})(Fi||(Fi={}));let sn=class Ja{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new Ja(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new fe(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new fe(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return Oe[0]=this.readInt32(t),Yo[0]}readFloat64(t){return Oe[_r?0:1]=this.readInt32(t),Oe[_r?1:0]=this.readInt32(t+4),Wo[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){Yo[0]=e,this.writeInt32(t,Oe[0])}writeFloat64(t,e){Wo[0]=e,this.writeInt32(t,Oe[_r?0:1]),this.writeInt32(t+4,Oe[_r?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Gt+he)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<he;e++)t+=String.fromCharCode(this.readInt8(this.position_+Gt+e));return t}__offset(t,e){const r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const r=this.readInt32(t);let i="",s=0;if(t+=Gt,e===Fi.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;s<r;){let o;const a=this.readUint8(t+s++);if(a<192)o=a;else{const c=this.readUint8(t+s++);if(a<224)o=(a&31)<<6|c&63;else{const d=this.readUint8(t+s++);if(a<240)o=(a&15)<<12|(c&63)<<6|d&63;else{const h=this.readUint8(t+s++);o=(a&7)<<18|(c&63)<<12|(d&63)<<6|h&63}}}o<65536?i+=String.fromCharCode(o):(o-=65536,i+=String.fromCharCode((o>>10)+55296,(o&1023)+56320))}return i}__union_with_string(t,e){return typeof t=="string"?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Gt}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=he)throw new Error("FlatBuffers: file identifier must be length "+he);for(let e=0;e<he;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+Gt+e))return!1;return!0}createLong(t,e){return fe.create(t,e)}createScalarList(t,e){const r=[];for(let i=0;i<e;++i)t(i)!==null&&r.push(t(i));return r}createObjList(t,e){const r=[];for(let i=0;i<e;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},Ho=class qa{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null;let e;t?e=t:e=1024,this.bb=sn.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+e)+1&t-1;for(;this.space<r+t+e;){const i=this.bb.capacity();this.bb=qa.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,r){(this.force_defaults||!e.equals(r))&&(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,r){e!=r&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=e<<1,i=sn.allocate(r);return i.setPosition(r-e),i.bytes().set(t.bytes(),r-e),i}addOffset(t){this.prep(Gt,0),this.writeInt32(this.offset()-t+Gt)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&this.vtable[e]==0;e--);const r=e+1;for(;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Oi;this.addInt16(s);let o=0;const a=this.space;t:for(e=0;e<this.vtables.length;e++){const c=this.bb.capacity()-this.vtables[e];if(s==this.bb.readInt16(c)){for(let d=Oi;d<s;d+=Oi)if(this.bb.readInt16(a+d)!=this.bb.readInt16(c+d))continue t;o=this.vtables[e];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,r){const i=r?tt:0;if(e){const s=e;if(this.prep(this.minalign,Gt+he+i),s.length!=he)throw new Error("FlatBuffers: file identifier must be length "+he);for(let o=he-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Gt+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(this.bb.readInt16(i+e)!=0))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(Gt,t*e),this.prep(r,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let r=0;for(;r<t.length;){let i;const s=t.charCodeAt(r++);if(s<55296||s>=56320)i=s;else{const o=t.charCodeAt(r++);i=(s<<10)+o+-56613888}i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(i&63|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let r=0,i=this.space,s=this.bb.bytes();r<e.length;r++)s[i++]=e[r];return this.endVector()}createLong(t,e){return fe.create(t,e)}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)e.push(this.createObjectOffset(i));else throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}};class ft{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new ft).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+tt),(e||new ft).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,r){return ft.startKeyValue(t),ft.addKey(t,e),ft.addValue(t,r),ft.endKeyValue(t)}}var on;(function(n){n[n.V1=0]="V1",n[n.V2=1]="V2",n[n.V3=2]="V3",n[n.V4=3]="V4",n[n.V5=4]="V5"})(on||(on={}));var an;(function(n){n[n.Little=0]="Little",n[n.Big=1]="Big"})(an||(an={}));var vr;(function(n){n[n.DenseArray=0]="DenseArray"})(vr||(vr={}));class Mt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new Mt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+tt),(e||new Mt).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,r){return Mt.startInt(t),Mt.addBitWidth(t,e),Mt.addIsSigned(t,r),Mt.endInt(t)}}class pe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+tt),(e||new pe).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new Mt).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):vr.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,vr.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Ne{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new Ne).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+tt),(e||new Ne).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Ne.startBinary(t),Ne.endBinary(t)}}class Ce{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Ce).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+tt),(e||new Ce).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Ce.startBool(t),Ce.endBool(t)}}var wr;(function(n){n[n.DAY=0]="DAY",n[n.MILLISECOND=1]="MILLISECOND"})(wr||(wr={}));let Sr=class vn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new vn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+tt),(e||new vn).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):wr.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,wr.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return vn.startDate(t),vn.addUnit(t,e),vn.endDate(t)}};class At{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new At).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+tt),(e||new At).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,r,i){return At.startDecimal(t),At.addPrecision(t,e),At.addScale(t,r),At.addBitWidth(t,i),At.endDecimal(t)}}var cn;(function(n){n[n.SECOND=0]="SECOND",n[n.MILLISECOND=1]="MILLISECOND",n[n.MICROSECOND=2]="MICROSECOND",n[n.NANOSECOND=3]="NANOSECOND"})(cn||(cn={}));class Zt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new Zt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+tt),(e||new Zt).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return Zt.startFixedSizeBinary(t),Zt.addByteWidth(t,e),Zt.endFixedSizeBinary(t)}}class Xt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new Xt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+tt),(e||new Xt).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return Xt.startFixedSizeList(t),Xt.addListSize(t,e),Xt.endFixedSizeList(t)}}var Ir;(function(n){n[n.HALF=0]="HALF",n[n.SINGLE=1]="SINGLE",n[n.DOUBLE=2]="DOUBLE"})(Ir||(Ir={}));class Qt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new Qt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+tt),(e||new Qt).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ir.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Ir.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return Qt.startFloatingPoint(t),Qt.addPrecision(t,e),Qt.endFloatingPoint(t)}}var Ar;(function(n){n[n.YEAR_MONTH=0]="YEAR_MONTH",n[n.DAY_TIME=1]="DAY_TIME",n[n.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ar||(Ar={}));class te{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new te).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+tt),(e||new te).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ar.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,Ar.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return te.startInterval(t),te.addUnit(t,e),te.endInterval(t)}}class Le{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new Le).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+tt),(e||new Le).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Le.startList(t),Le.endList(t)}}let Br=class wn{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new wn).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+tt),(e||new wn).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return wn.startMap(t),wn.addKeysSorted(t,e),wn.endMap(t)}};class Ue{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new Ue).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+tt),(e||new Ue).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Ue.startNull(t),Ue.endNull(t)}}class Pe{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new Pe).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+tt),(e||new Pe).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Pe.startStruct_(t),Pe.endStruct_(t)}}class Pt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new Pt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+tt),(e||new Pt).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cn.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,cn.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,r){return Pt.startTime(t),Pt.addUnit(t,e),Pt.addBitWidth(t,r),Pt.endTime(t)}}class kt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new kt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+tt),(e||new kt).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):cn.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,cn.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,r){return kt.startTimestamp(t),kt.addUnit(t,e),kt.addTimezone(t,r),kt.endTimestamp(t)}}var Or;(function(n){n[n.Sparse=0]="Sparse",n[n.Dense=1]="Dense"})(Or||(Or={}));class Bt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new Bt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+tt),(e||new Bt).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Or.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,Or.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,r){return Bt.startUnion(t),Bt.addMode(t,e),Bt.addTypeIds(t,r),Bt.endUnion(t)}}class ke{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new ke).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+tt),(e||new ke).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return ke.startUtf8(t),ke.endUtf8(t)}}var ot;(function(n){n[n.NONE=0]="NONE",n[n.Null=1]="Null",n[n.Int=2]="Int",n[n.FloatingPoint=3]="FloatingPoint",n[n.Binary=4]="Binary",n[n.Utf8=5]="Utf8",n[n.Bool=6]="Bool",n[n.Decimal=7]="Decimal",n[n.Date=8]="Date",n[n.Time=9]="Time",n[n.Timestamp=10]="Timestamp",n[n.Interval=11]="Interval",n[n.List=12]="List",n[n.Struct_=13]="Struct_",n[n.Union=14]="Union",n[n.FixedSizeBinary=15]="FixedSizeBinary",n[n.FixedSizeList=16]="FixedSizeList",n[n.Map=17]="Map",n[n.Duration=18]="Duration",n[n.LargeBinary=19]="LargeBinary",n[n.LargeUtf8=20]="LargeUtf8",n[n.LargeList=21]="LargeList"})(ot||(ot={}));let jt=class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new Gr).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+tt),(e||new Gr).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ot.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new pe).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const r=this.bb.__offset(this.bb_pos,14);return r?(e||new Gr).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,16);return r?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,ot.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}},ee=class _e{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new _e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+tt),(e||new _e).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):an.Little}fields(t,e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new jt).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,8);return r?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+t*8):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,an.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,r,i,s){return _e.startSchema(t),_e.addEndianness(t,e),_e.addFields(t,r),_e.addCustomMetadata(t,i),_e.addFeatures(t,s),_e.endSchema(t)}};class Nt{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new Nt).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+tt),(e||new Nt).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):on.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ee).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const r=this.bb.__offset(this.bb_pos,8);return r?(e||new Bi).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const r=this.bb.__offset(this.bb_pos,10);return r?(e||new Bi).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,12);return r?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,on.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}class K{constructor(t=[],e,r){this.fields=t||[],this.metadata=e||new Map,r||(r=Di(t)),this.dictionaries=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,e)=>`${e}: ${t}`).join(", ")} }>`}select(t){const e=new Set(t),r=this.fields.filter(i=>e.has(i.name));return new K(r,this.metadata)}selectAt(t){const e=t.map(r=>this.fields[r]).filter(Boolean);return new K(e,this.metadata)}assign(...t){const e=t[0]instanceof K?t[0]:Array.isArray(t[0])?new K(t[0]):new K(t),r=[...this.fields],i=Fr(Fr(new Map,this.metadata),e.metadata),s=e.fields.filter(a=>{const c=r.findIndex(d=>d.name===a.name);return~c?(r[c]=a.clone({metadata:Fr(Fr(new Map,r[c].metadata),a.metadata)}))&&!1:!0}),o=Di(s,new Map);return new K([...r,...s],i,new Map([...this.dictionaries,...o]))}}K.prototype.fields=null,K.prototype.metadata=null,K.prototype.dictionaries=null;class rt{constructor(t,e,r=!1,i){this.name=t,this.type=e,this.nullable=r,this.metadata=i||new Map}static new(...t){let[e,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:e}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new rt(`${e}`,r,i,s)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[e=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:e=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],rt.new(e,r,i,s)}}rt.prototype.type=null,rt.prototype.name=null,rt.prototype.nullable=null,rt.prototype.metadata=null;function Fr(n,t){return new Map([...n||new Map,...t||new Map])}function Di(n,t=new Map){for(let e=-1,r=n.length;++e<r;){const s=n[e].type;if(A.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Di(s.children,t)}return t}var Jo=fe,Jl=Ho,ql=sn;class Cn{constructor(t,e=xt.V4,r,i){this.schema=t,this.version=e,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}static decode(t){t=new ql(z(t));const e=Nt.getRootAsFooter(t),r=K.decode(e.schema());return new Kl(r,e)}static encode(t){const e=new Jl,r=K.encode(e,t.schema);Nt.startRecordBatchesVector(e,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())Fe.encode(e,o);const i=e.endVector();Nt.startDictionariesVector(e,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())Fe.encode(e,o);const s=e.endVector();return Nt.startFooter(e),Nt.addSchema(e,r),Nt.addVersion(e,xt.V4),Nt.addRecordBatches(e,i),Nt.addDictionaries(e,s),Nt.finishFooterBuffer(e,Nt.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,r=this.numRecordBatches;++e<r;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,r=this.numDictionaries;++e<r;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Kl extends Cn{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Fe.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Fe.decode(e)}return null}}class Fe{constructor(t,e,r){this.metaDataLength=t,this.offset=typeof r=="number"?r:r.low,this.bodyLength=typeof e=="number"?e:e.low}static decode(t){return new Fe(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:r}=e,i=new Jo(e.offset,0),s=new Jo(e.bodyLength,0);return Bi.createBlock(t,i,r,s)}}const at=Object.freeze({done:!0,value:void 0});class qo{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Ti{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Gl extends Ti{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return S(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(at);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Lt.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Lt.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return S(this,void 0,void 0,function*(){return yield this.abort(t),at})}return(t){return S(this,void 0,void 0,function*(){return yield this.close(),at})}read(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,r)=>{this.resolvers.push({resolve:e,reject:r})}):Promise.resolve(at)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Dr extends Gl{write(t){if((t=z(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?ni(this.toUint8Array(!0)):this.toUint8Array(!1).then(ni)}toUint8Array(t=!1){return t?Jt(this._values)[0]:S(this,void 0,void 0,function*(){var e,r;const i=[];let s=0;try{for(var o=Re(this),a;a=yield o.next(),!a.done;){const c=a.value;i.push(c),s+=c.byteLength}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=o.return)&&(yield r.call(o))}finally{if(e)throw e.error}}return Jt(i,s)[0]})}}class Tr{constructor(t){t&&(this.source=new Zl(Lt.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class ln{constructor(t){t instanceof ln?this.source=t.source:t instanceof Dr?this.source=new je(Lt.fromAsyncIterable(t)):ws(t)?this.source=new je(Lt.fromNodeStream(t)):si(t)?this.source=new je(Lt.fromDOMStream(t)):vs(t)?this.source=new je(Lt.fromDOMStream(t.body)):Fn(t)?this.source=new je(Lt.fromIterable(t)):ve(t)?this.source=new je(Lt.fromAsyncIterable(t)):qe(t)&&(this.source=new je(Lt.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Zl{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||at)}return(t){return Object.create(this.source.return&&this.source.return(t)||at)}}class je{constructor(t){this.source=t,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(t){return S(this,void 0,void 0,function*(){yield this.return(t)})}get closed(){return this._closedPromise}read(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return S(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(t,e="read"){return S(this,void 0,void 0,function*(){return yield this.source.next({cmd:e,size:t})})}throw(t){return S(this,void 0,void 0,function*(){const e=this.source.throw&&(yield this.source.throw(t))||at;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}return(t){return S(this,void 0,void 0,function*(){const e=this.source.return&&(yield this.source.return(t))||at;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)})}}class Ko extends Tr{constructor(t,e){super(),this.position=0,this.buffer=z(t),this.size=typeof e>"u"?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:r}=this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:r,position:i}=this;return e&&i<r?(typeof t!="number"&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(r,i+Math.min(r-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const r=this.buffer,i=Math.min(this.size,t+e);return r?r.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class Er extends ln{constructor(t,e){super(),this.position=0,this._handle=t,typeof e=="number"?this.size=e:this._pending=S(this,void 0,void 0,function*(){this.size=(yield t.stat()).size,delete this._pending})}readInt32(t){return S(this,void 0,void 0,function*(){const{buffer:e,byteOffset:r}=yield this.readAt(t,4);return new DataView(e,r).getInt32(0,!0)})}seek(t){return S(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size})}read(t){return S(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:e,size:r,position:i}=this;if(e&&i<r){typeof t!="number"&&(t=Number.POSITIVE_INFINITY);let s=i,o=0,a=0;const c=Math.min(r,s+Math.min(r-s,t)),d=new Uint8Array(Math.max(0,(this.position=c)-s));for(;(s+=a)<c&&(o+=a)<d.byteLength;)({bytesRead:a}=yield e.read(d,o,d.byteLength-o,s));return d}return null})}readAt(t,e){return S(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:r,size:i}=this;if(r&&t+e<i){const s=Math.min(i,t+e),o=new Uint8Array(s-t);return(yield r.read(o,0,e,t)).buffer}return new Uint8Array(e)})}close(){return S(this,void 0,void 0,function*(){const t=this._handle;this._handle=null,t&&(yield t.close())})}throw(t){return S(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}return(t){return S(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:t}})}}const Xl=65536;function un(n){return n<0&&(n=4294967295+n+1),`0x${n.toString(16)}`}const dn=8,Ei=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Go{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),r=new Uint32Array([t.buffer[1]>>>16,t.buffer[1]&65535,t.buffer[0]>>>16,t.buffer[0]&65535]);let i=e[3]*r[3];this.buffer[0]=i&65535;let s=i>>>16;return i=e[2]*r[3],s+=i,i=e[3]*r[2]>>>0,s+=i,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<i?Xl:0,this.buffer[1]+=s>>>16,this.buffer[1]+=e[1]*r[3]+e[2]*r[2]+e[3]*r[1],this.buffer[1]+=e[0]*r[3]+e[1]*r[2]+e[2]*r[1]+e[3]*r[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${un(this.buffer[1])} ${un(this.buffer[0])}`}}class Z extends Go{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return Z.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Z.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.length,i=new Z(e);for(let s=0;s<r;){const o=dn<r-s?dn:r-s,a=new Z(new Uint32Array([Number.parseInt(t.slice(s,s+o),10),0])),c=new Z(new Uint32Array([Ei[o],0]));i.times(c),i.plus(a),s+=o}return i}static convertArray(t){const e=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Z.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new Z(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Z(new Uint32Array(t.buffer)).plus(e)}}class Ot extends Go{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,r=t.buffer[1]<<0;return e<r||e===r&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return Ot.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Ot.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const r=t.startsWith("-"),i=t.length,s=new Ot(e);for(let o=r?1:0;o<i;){const a=dn<i-o?dn:i-o,c=new Ot(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0])),d=new Ot(new Uint32Array([Ei[a],0]));s.times(d),s.plus(c),o+=a}return r?s.negate():s}static convertArray(t){const e=new Uint32Array(t.length*2);for(let r=-1,i=t.length;++r<i;)Ot.from(t[r],new Uint32Array(e.buffer,e.byteOffset+2*r*4,2));return e}static multiply(t,e){return new Ot(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Ot(new Uint32Array(t.buffer)).plus(e)}}class ne{constructor(t){this.buffer=t}high(){return new Ot(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Ot(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(t){const e=new Z(new Uint32Array([this.buffer[3],0])),r=new Z(new Uint32Array([this.buffer[2],0])),i=new Z(new Uint32Array([this.buffer[1],0])),s=new Z(new Uint32Array([this.buffer[0],0])),o=new Z(new Uint32Array([t.buffer[3],0])),a=new Z(new Uint32Array([t.buffer[2],0])),c=new Z(new Uint32Array([t.buffer[1],0])),d=new Z(new Uint32Array([t.buffer[0],0]));let h=Z.multiply(s,d);this.buffer[0]=h.low();const f=new Z(new Uint32Array([h.high(),0]));return h=Z.multiply(i,d),f.plus(h),h=Z.multiply(s,c),f.plus(h),this.buffer[1]=f.low(),this.buffer[3]=f.lessThan(h)?1:0,this.buffer[2]=f.high(),new Z(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(Z.multiply(r,d)).plus(Z.multiply(i,c)).plus(Z.multiply(s,a)),this.buffer[3]+=Z.multiply(e,d).plus(Z.multiply(r,c)).plus(Z.multiply(i,a)).plus(Z.multiply(s,o)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${un(this.buffer[3])} ${un(this.buffer[2])} ${un(this.buffer[1])} ${un(this.buffer[0])}`}static multiply(t,e){return new ne(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new ne(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return ne.fromString(typeof t=="string"?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return ne.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const r=t.startsWith("-"),i=t.length,s=new ne(e);for(let o=r?1:0;o<i;){const a=dn<i-o?dn:i-o,c=new ne(new Uint32Array([Number.parseInt(t.slice(o,o+a),10),0,0,0])),d=new ne(new Uint32Array([Ei[a],0,0,0]));s.times(d),s.plus(c),o+=a}return r?s.negate():s}static convertArray(t){const e=new Uint32Array(t.length*4);for(let r=-1,i=t.length;++r<i;)ne.from(t[r],new Uint32Array(e.buffer,e.byteOffset+4*4*r,4));return e}}class Zo extends P{constructor(t,e,r,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=r,this.dictionaries=i}visit(t){return super.visit(t instanceof rt?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return k({type:t,length:e})}visitBool(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitInt(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDate(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitTime(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitList(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Rt.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:r}=this.nextFieldNode()){return k({type:t,length:e,nullCount:r,nullBitmap:this.readNullBitmap(t,r),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,r=this.nextBufferRange()){return e>0&&this.readData(t,r)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:r}=this.nextBufferRange()){return this.bytes.subarray(r,r+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Ql extends Zo{constructor(t,e,r,i){super(new Uint8Array(0),e,r,i),this.sources=t}readNullBitmap(t,e,{offset:r}=this.nextBufferRange()){return e<=0?new Uint8Array(0):mr(this.sources[r])}readOffsets(t,{offset:e}=this.nextBufferRange()){return Q(Uint8Array,Q(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return Q(Uint8Array,Q(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:r}=this;return A.isTimestamp(t)||(A.isInt(t)||A.isTime(t))&&t.bitWidth===64||A.isDate(t)&&t.unit===ce.MILLISECOND?Q(Uint8Array,Ot.convertArray(r[e])):A.isDecimal(t)?Q(Uint8Array,ne.convertArray(r[e])):A.isBinary(t)||A.isFixedSizeBinary(t)?tu(r[e]):A.isBool(t)?mr(r[e]):A.isUtf8(t)?ri(r[e].join("")):Q(Uint8Array,Q(t.ArrayType,r[e].map(i=>+i)))}}function tu(n){const t=n.join(""),e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r>>1]=Number.parseInt(t.slice(r,r+2),16);return e}class D extends P{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every((r,i)=>this.compareFields(r,e[i]))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function Ft(n,t){return t instanceof n.constructor}function Ln(n,t){return n===t||Ft(n,t)}function ye(n,t){return n===t||Ft(n,t)&&n.bitWidth===t.bitWidth&&n.isSigned===t.isSigned}function xr(n,t){return n===t||Ft(n,t)&&n.precision===t.precision}function eu(n,t){return n===t||Ft(n,t)&&n.byteWidth===t.byteWidth}function xi(n,t){return n===t||Ft(n,t)&&n.unit===t.unit}function Un(n,t){return n===t||Ft(n,t)&&n.unit===t.unit&&n.timezone===t.timezone}function Pn(n,t){return n===t||Ft(n,t)&&n.unit===t.unit&&n.bitWidth===t.bitWidth}function nu(n,t){return n===t||Ft(n,t)&&n.children.length===t.children.length&&De.compareManyFields(n.children,t.children)}function ru(n,t){return n===t||Ft(n,t)&&n.children.length===t.children.length&&De.compareManyFields(n.children,t.children)}function Ri(n,t){return n===t||Ft(n,t)&&n.mode===t.mode&&n.typeIds.every((e,r)=>e===t.typeIds[r])&&De.compareManyFields(n.children,t.children)}function iu(n,t){return n===t||Ft(n,t)&&n.id===t.id&&n.isOrdered===t.isOrdered&&De.visit(n.indices,t.indices)&&De.visit(n.dictionary,t.dictionary)}function Mi(n,t){return n===t||Ft(n,t)&&n.unit===t.unit}function su(n,t){return n===t||Ft(n,t)&&n.listSize===t.listSize&&n.children.length===t.children.length&&De.compareManyFields(n.children,t.children)}function ou(n,t){return n===t||Ft(n,t)&&n.keysSorted===t.keysSorted&&n.children.length===t.children.length&&De.compareManyFields(n.children,t.children)}D.prototype.visitNull=Ln,D.prototype.visitBool=Ln,D.prototype.visitInt=ye,D.prototype.visitInt8=ye,D.prototype.visitInt16=ye,D.prototype.visitInt32=ye,D.prototype.visitInt64=ye,D.prototype.visitUint8=ye,D.prototype.visitUint16=ye,D.prototype.visitUint32=ye,D.prototype.visitUint64=ye,D.prototype.visitFloat=xr,D.prototype.visitFloat16=xr,D.prototype.visitFloat32=xr,D.prototype.visitFloat64=xr,D.prototype.visitUtf8=Ln,D.prototype.visitBinary=Ln,D.prototype.visitFixedSizeBinary=eu,D.prototype.visitDate=xi,D.prototype.visitDateDay=xi,D.prototype.visitDateMillisecond=xi,D.prototype.visitTimestamp=Un,D.prototype.visitTimestampSecond=Un,D.prototype.visitTimestampMillisecond=Un,D.prototype.visitTimestampMicrosecond=Un,D.prototype.visitTimestampNanosecond=Un,D.prototype.visitTime=Pn,D.prototype.visitTimeSecond=Pn,D.prototype.visitTimeMillisecond=Pn,D.prototype.visitTimeMicrosecond=Pn,D.prototype.visitTimeNanosecond=Pn,D.prototype.visitDecimal=Ln,D.prototype.visitList=nu,D.prototype.visitStruct=ru,D.prototype.visitUnion=Ri,D.prototype.visitDenseUnion=Ri,D.prototype.visitSparseUnion=Ri,D.prototype.visitDictionary=iu,D.prototype.visitInterval=Mi,D.prototype.visitIntervalDayTime=Mi,D.prototype.visitIntervalYearMonth=Mi,D.prototype.visitFixedSizeList=su,D.prototype.visitMap=ou;const De=new D;function Ni(n,t){return De.compareSchemas(n,t)}function Ci(n,t){return au(n,t.map(e=>e.data.concat()))}function au(n,t){const e=[...n.fields],r=[],i={numBatches:t.reduce((f,m)=>Math.max(f,m.length),0)};let s=0,o=0,a=-1;const c=t.length;let d,h=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<c;)h[a]=d=t[a].shift(),o=Math.min(o,d?d.length:o);Number.isFinite(o)&&(h=cu(e,o,h,t,i),o>0&&(r[s++]=k({type:new gt(e),length:o,nullCount:0,children:h.slice()})))}return[n=n.assign(e),r.map(f=>new Dt(n,f))]}function cu(n,t,e,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,c=r.length;++a<c;){const d=e[a],h=d==null?void 0:d.length;if(h>=t)h===t?e[a]=d:(e[a]=d.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(d.slice(t,h-t))));else{const f=n[a];n[a]=f.clone({nullable:!0}),e[a]=(s=d==null?void 0:d._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:k({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return e}var Xo;class bt{constructor(...t){var e,r;if(t.length===0)return this.batches=[],this.schema=new K([]),this._offsets=[0],this;let i,s;t[0]instanceof K&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(s=t.pop());const o=c=>{if(c){if(c instanceof Dt)return[c];if(c instanceof bt)return c.batches;if(c instanceof nt){if(c.type instanceof gt)return[new Dt(new K(c.type.children),c)]}else{if(Array.isArray(c))return c.flatMap(d=>o(d));if(typeof c[Symbol.iterator]=="function")return[...c].flatMap(d=>o(d));if(typeof c=="object"){const d=Object.keys(c),h=d.map(_=>new q([c[_]])),f=new K(d.map((_,C)=>new rt(String(_),h[C].type))),[,m]=Ci(f,h);return m.length===0?[new Dt(c)]:m}}}return[]},a=t.flatMap(c=>o(c));if(i=(r=i??((e=a[0])===null||e===void 0?void 0:e.schema))!==null&&r!==void 0?r:new K([]),!(i instanceof K))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const c of a){if(!(c instanceof Dt))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ni(i,c.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??No(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,e)=>t+e.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=Mo(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Ai.visit(new q(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const e=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new bt(e,r.map(i=>new Dt(e,i)))}slice(t,e){const r=this.schema;[t,e]=Do({length:this.numRows},t,e);const i=Co(this.data,this._offsets,t,e);return new bt(r,i.map(s=>new Dt(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(e=>e.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map(r=>r.children[t]);if(e.length===0){const{type:r}=this.schema.fields[t],i=k({type:r,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new q(e)}return null}setChild(t,e){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),e)}setChildAt(t,e){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new q([k({type:new Se,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:e.type}),a=this.schema.fields.map((c,d)=>this.getChildAt(d));[s[t],a[t]]=[o,e],[r,i]=Ci(r,a)}return new bt(r,i)}select(t){const e=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>e.get(r)).filter(r=>r>-1))}selectAt(t){const e=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new bt(e,r)}assign(t){const e=this.schema.fields,[r,i]=t.schema.fields.reduce((a,c,d)=>{const[h,f]=a,m=e.findIndex(_=>_.name===c.name);return~m?f[m]=d:h.push(d),a},[[],[]]),s=this.schema.assign(t.schema),o=[...e.map((a,c)=>[c,i[c]]).map(([a,c])=>c===void 0?this.getChildAt(a):t.getChildAt(c)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new bt(...Ci(s,o))}}Xo=Symbol.toStringTag,bt[Xo]=(n=>(n.schema=null,n.batches=[],n._offsets=new Uint32Array([0]),n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,n.isValid=rn(Ii),n.get=rn(It.getVisitFn(u.Struct)),n.set=Lo(Ut.getVisitFn(u.Struct)),n.indexOf=Uo(gr.getVisitFn(u.Struct)),n.getByteLength=rn(Kt.getVisitFn(u.Struct)),"Table"))(bt.prototype);var Qo;let Dt=class Xn{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof K))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=k({nullCount:0,type:new gt(this.schema.fields),children:this.schema.fields.map(e=>k({type:e.type,nullCount:0}))})]=t,!(this.data instanceof nt))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ta(this.schema,this.data.children);break}case 1:{const[e]=t,{fields:r,children:i,length:s}=Object.keys(e).reduce((c,d,h)=>(c.children[h]=e[d],c.length=Math.max(c.length,e[d].length),c.fields[h]=rt.new({name:d,type:e[d].type,nullable:!0}),c),{length:0,fields:new Array,children:new Array}),o=new K(r),a=k({type:new gt(r),length:s,children:i,nullCount:0});[this.schema,this.data]=ta(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ea(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return It.visit(this.data,t)}set(t,e){return Ut.visit(this.data,t,e)}indexOf(t,e){return gr.visit(this.data,t,e)}getByteLength(t){return Kt.visit(this.data,t)}[Symbol.iterator](){return Ai.visit(new q([this.data]))}toArray(){return[...this]}concat(...t){return new bt(this.schema,[this,...t])}slice(t,e){const[r]=new q([this.data]).slice(t,e).data;return new Xn(this.schema,r)}getChild(t){var e;return this.getChildAt((e=this.schema.fields)===null||e===void 0?void 0:e.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new q([this.data.children[t]]):null}setChild(t,e){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),e)}setChildAt(t,e){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){e||(e=new q([k({type:new Se,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:e.type});[s[t],o[t]]=[a,e.data[0]],r=new K(s,new Map(this.schema.metadata)),i=k({type:new gt(s),children:o})}return new Xn(r,i)}select(t){const e=this.schema.select(t),r=new gt(e.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new Xn(e,k({type:r,length:this.numRows,children:i}))}selectAt(t){const e=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=k({type:new gt(e.fields),length:this.numRows,children:r});return new Xn(e,i)}};Qo=Symbol.toStringTag,Dt[Qo]=(n=>(n._nullCount=-1,n[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Dt.prototype);function ta(n,t,e=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...n.fields],s=[...t],o=(e+63&-64)>>3;for(const[a,c]of n.fields.entries()){const d=t[a];(!d||d.length!==e)&&(i[a]=c.clone({nullable:!0}),s[a]=(r=d==null?void 0:d._changeLengthAndBackfillNullBitmap(e))!==null&&r!==void 0?r:k({type:c.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)}))}return[n.assign(i),k({type:new gt(i),length:e,children:s})]}function ea(n,t,e=new Map){for(let r=-1,i=n.length;++r<i;){const o=n[r].type,a=t[r];if(A.isDictionary(o)){if(!e.has(o.id))a.dictionary&&e.set(o.id,a.dictionary);else if(e.get(o.id)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}o.children&&o.children.length>0&&ea(o.children,a.children,e)}return e}class Li extends Dt{constructor(t){const e=t.fields.map(i=>k({type:i.type})),r=k({type:new gt(t.fields),nullCount:0,children:e});super(t,r)}}var Rr;(function(n){n[n.BUFFER=0]="BUFFER"})(Rr||(Rr={}));var Mr;(function(n){n[n.LZ4_FRAME=0]="LZ4_FRAME",n[n.ZSTD=1]="ZSTD"})(Mr||(Mr={}));class Te{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new Te).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+tt),(e||new Te).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Mr.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Rr.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Mr.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Rr.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,r){return Te.startBodyCompression(t),Te.addCodec(t,e),Te.addMethod(t,r),Te.endBodyCompression(t)}}class na{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}}let ra=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,r){return t.prep(8,16),t.writeInt64(r),t.writeInt64(e),t.offset()}},me=class is{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+tt),(e||new is).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const r=this.bb.__offset(this.bb_pos,6);return r?(e||new ra).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const r=this.bb.__offset(this.bb_pos,8);return r?(e||new na).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new Te).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}},hn=class ss{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new ss).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+tt),(e||new ss).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new me).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}};var Nr;(function(n){n[n.NONE=0]="NONE",n[n.Schema=1]="Schema",n[n.DictionaryBatch=2]="DictionaryBatch",n[n.RecordBatch=3]="RecordBatch",n[n.Tensor=4]="Tensor",n[n.SparseTensor=5]="SparseTensor"})(Nr||(Nr={}));let Ee=class ae{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new ae).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+tt),(e||new ae).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):on.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Nr.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const r=this.bb.__offset(this.bb_pos,12);return r?(e||new ft).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,on.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,Nr.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,r,i,s,o){return ae.startMessage(t),ae.addVersion(t,e),ae.addHeaderType(t,r),ae.addHeader(t,i),ae.addBodyLength(t,s),ae.addCustomMetadata(t,o),ae.endMessage(t)}};var lu=fe;class uu extends P{visit(t,e){return t==null||e==null?void 0:super.visit(t,e)}visitNull(t,e){return Ue.startNull(e),Ue.endNull(e)}visitInt(t,e){return Mt.startInt(e),Mt.addBitWidth(e,t.bitWidth),Mt.addIsSigned(e,t.isSigned),Mt.endInt(e)}visitFloat(t,e){return Qt.startFloatingPoint(e),Qt.addPrecision(e,t.precision),Qt.endFloatingPoint(e)}visitBinary(t,e){return Ne.startBinary(e),Ne.endBinary(e)}visitBool(t,e){return Ce.startBool(e),Ce.endBool(e)}visitUtf8(t,e){return ke.startUtf8(e),ke.endUtf8(e)}visitDecimal(t,e){return At.startDecimal(e),At.addScale(e,t.scale),At.addPrecision(e,t.precision),At.addBitWidth(e,t.bitWidth),At.endDecimal(e)}visitDate(t,e){return Sr.startDate(e),Sr.addUnit(e,t.unit),Sr.endDate(e)}visitTime(t,e){return Pt.startTime(e),Pt.addUnit(e,t.unit),Pt.addBitWidth(e,t.bitWidth),Pt.endTime(e)}visitTimestamp(t,e){const r=t.timezone&&e.createString(t.timezone)||void 0;return kt.startTimestamp(e),kt.addUnit(e,t.unit),r!==void 0&&kt.addTimezone(e,r),kt.endTimestamp(e)}visitInterval(t,e){return te.startInterval(e),te.addUnit(e,t.unit),te.endInterval(e)}visitList(t,e){return Le.startList(e),Le.endList(e)}visitStruct(t,e){return Pe.startStruct_(e),Pe.endStruct_(e)}visitUnion(t,e){Bt.startTypeIdsVector(e,t.typeIds.length);const r=Bt.createTypeIdsVector(e,t.typeIds);return Bt.startUnion(e),Bt.addMode(e,t.mode),Bt.addTypeIds(e,r),Bt.endUnion(e)}visitDictionary(t,e){const r=this.visit(t.indices,e);return pe.startDictionaryEncoding(e),pe.addId(e,new lu(t.id,0)),pe.addIsOrdered(e,t.isOrdered),r!==void 0&&pe.addIndexType(e,r),pe.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return Zt.startFixedSizeBinary(e),Zt.addByteWidth(e,t.byteWidth),Zt.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return Xt.startFixedSizeList(e),Xt.addListSize(e,t.listSize),Xt.endFixedSizeList(e)}visitMap(t,e){return Br.startMap(e),Br.addKeysSorted(e,t.keysSorted),Br.endMap(e)}}const Ui=new uu;function du(n,t=new Map){return new K(fu(n,t),Cr(n.customMetadata),t)}function ia(n){return new Ct(n.count,oa(n.columns),aa(n.columns))}function hu(n){return new re(ia(n.data),n.id,n.isDelta)}function fu(n,t){return(n.fields||[]).filter(Boolean).map(e=>rt.fromJSON(e,t))}function sa(n,t){return(n.children||[]).filter(Boolean).map(e=>rt.fromJSON(e,t))}function oa(n){return(n||[]).reduce((t,e)=>[...t,new $e(e.count,pu(e.VALIDITY)),...oa(e.children)],[])}function aa(n,t=[]){for(let e=-1,r=(n||[]).length;++e<r;){const i=n[e];i.VALIDITY&&t.push(new ie(t.length,i.VALIDITY.length)),i.TYPE&&t.push(new ie(t.length,i.TYPE.length)),i.OFFSET&&t.push(new ie(t.length,i.OFFSET.length)),i.DATA&&t.push(new ie(t.length,i.DATA.length)),t=aa(i.children,t)}return t}function pu(n){return(n||[]).reduce((t,e)=>t+ +(e===0),0)}function yu(n,t){let e,r,i,s,o,a;return!t||!(s=n.dictionary)?(o=la(n,sa(n,t)),i=new rt(n.name,o,n.nullable,Cr(n.customMetadata))):t.has(e=s.id)?(r=(r=s.indexType)?ca(r):new xn,a=new Ze(t.get(e),r,e,s.isOrdered),i=new rt(n.name,a,n.nullable,Cr(n.customMetadata))):(r=(r=s.indexType)?ca(r):new xn,t.set(e,o=la(n,sa(n,t))),a=new Ze(o,r,e,s.isOrdered),i=new rt(n.name,a,n.nullable,Cr(n.customMetadata))),i||null}function Cr(n){return new Map(Object.entries(n||{}))}function ca(n){return new Ie(n.isSigned,n.bitWidth)}function la(n,t){const e=n.type.name;switch(e){case"NONE":return new Se;case"null":return new Se;case"binary":return new rr;case"utf8":return new ir;case"bool":return new sr;case"list":return new ur((t||[])[0]);case"struct":return new gt(t||[]);case"struct_":return new gt(t||[])}switch(e){case"int":{const r=n.type;return new Ie(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=n.type;return new Rn(St[r.precision])}case"decimal":{const r=n.type;return new or(r.scale,r.precision,r.bitWidth)}case"date":{const r=n.type;return new ar(ce[r.unit])}case"time":{const r=n.type;return new Mn(Y[r.unit],r.bitWidth)}case"timestamp":{const r=n.type;return new cr(Y[r.unit],r.timezone)}case"interval":{const r=n.type;return new lr(we[r.unit])}case"union":{const r=n.type;return new dr(Rt[r.mode],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=n.type;return new hr(r.byteWidth)}case"fixedsizelist":{const r=n.type;return new fr(r.listSize,(t||[])[0])}case"map":{const r=n.type;return new pr((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${e}"`)}var Ve=fe,mu=Ho,gu=sn;class _t{constructor(t,e,r,i){this._version=e,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=typeof t=="number"?t:t.low}static fromJSON(t,e){const r=new _t(0,xt.V4,e);return r._createHeader=bu(t,e),r}static decode(t){t=new gu(z(t));const e=Ee.getRootAsMessage(t),r=e.bodyLength(),i=e.version(),s=e.headerType(),o=new _t(r,i,s);return o._createHeader=_u(e,s),o}static encode(t){const e=new mu;let r=-1;return t.isSchema()?r=K.encode(e,t.header()):t.isRecordBatch()?r=Ct.encode(e,t.header()):t.isDictionaryBatch()&&(r=re.encode(e,t.header())),Ee.startMessage(e),Ee.addVersion(e,xt.V4),Ee.addHeader(e,r),Ee.addHeaderType(e,t.headerType),Ee.addBodyLength(e,new Ve(t.bodyLength,0)),Ee.finishMessageBuffer(e,Ee.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof K)return new _t(0,xt.V4,J.Schema,t);if(t instanceof Ct)return new _t(e,xt.V4,J.RecordBatch,t);if(t instanceof re)return new _t(e,xt.V4,J.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===J.Schema}isRecordBatch(){return this.headerType===J.RecordBatch}isDictionaryBatch(){return this.headerType===J.DictionaryBatch}}class Ct{constructor(t,e,r){this._nodes=e,this._buffers=r,this._length=typeof t=="number"?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class re{constructor(t,e,r=!1){this._data=t,this._isDelta=r,this._id=typeof e=="number"?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class ie{constructor(t,e){this.offset=typeof t=="number"?t:t.low,this.length=typeof e=="number"?e:e.low}}class $e{constructor(t,e){this.length=typeof t=="number"?t:t.low,this.nullCount=typeof e=="number"?e:e.low}}function bu(n,t){return()=>{switch(t){case J.Schema:return K.fromJSON(n);case J.RecordBatch:return Ct.fromJSON(n);case J.DictionaryBatch:return re.fromJSON(n)}throw new Error(`Unrecognized Message type: { name: ${J[t]}, type: ${t} }`)}}function _u(n,t){return()=>{switch(t){case J.Schema:return K.decode(n.header(new ee));case J.RecordBatch:return Ct.decode(n.header(new me),n.version());case J.DictionaryBatch:return re.decode(n.header(new hn),n.version())}throw new Error(`Unrecognized Message type: { name: ${J[t]}, type: ${t} }`)}}rt.encode=Eu,rt.decode=Du,rt.fromJSON=yu,K.encode=Tu,K.decode=vu,K.fromJSON=du,Ct.encode=xu,Ct.decode=wu,Ct.fromJSON=ia,re.encode=Ru,re.decode=Su,re.fromJSON=hu,$e.encode=Mu,$e.decode=Au,ie.encode=Nu,ie.decode=Iu;function vu(n,t=new Map){const e=Fu(n,t);return new K(e,Lr(n),t)}function wu(n,t=xt.V4){if(n.compression()!==null)throw new Error("Record batch compression not implemented");return new Ct(n.length(),Bu(n),Ou(n,t))}function Su(n,t=xt.V4){return new re(Ct.decode(n.data(),t),n.id(),n.isDelta())}function Iu(n){return new ie(n.offset(),n.length())}function Au(n){return new $e(n.length(),n.nullCount())}function Bu(n){const t=[];for(let e,r=-1,i=-1,s=n.nodesLength();++r<s;)(e=n.nodes(r))&&(t[++i]=$e.decode(e));return t}function Ou(n,t){const e=[];for(let r,i=-1,s=-1,o=n.buffersLength();++i<o;)(r=n.buffers(i))&&(t<xt.V4&&(r.bb_pos+=8*(i+1)),e[++s]=ie.decode(r));return e}function Fu(n,t){const e=[];for(let r,i=-1,s=-1,o=n.fieldsLength();++i<o;)(r=n.fields(i))&&(e[++s]=rt.decode(r,t));return e}function ua(n,t){const e=[];for(let r,i=-1,s=-1,o=n.childrenLength();++i<o;)(r=n.children(i))&&(e[++s]=rt.decode(r,t));return e}function Du(n,t){let e,r,i,s,o,a;return!t||!(a=n.dictionary())?(i=ha(n,ua(n,t)),r=new rt(n.name(),i,n.nullable(),Lr(n))):t.has(e=a.id().low)?(s=(s=a.indexType())?da(s):new xn,o=new Ze(t.get(e),s,e,a.isOrdered()),r=new rt(n.name(),o,n.nullable(),Lr(n))):(s=(s=a.indexType())?da(s):new xn,t.set(e,i=ha(n,ua(n,t))),o=new Ze(i,s,e,a.isOrdered()),r=new rt(n.name(),o,n.nullable(),Lr(n))),r||null}function Lr(n){const t=new Map;if(n)for(let e,r,i=-1,s=Math.trunc(n.customMetadataLength());++i<s;)(e=n.customMetadata(i))&&(r=e.key())!=null&&t.set(r,e.value());return t}function da(n){return new Ie(n.isSigned(),n.bitWidth())}function ha(n,t){const e=n.typeType();switch(e){case ot.NONE:return new Se;case ot.Null:return new Se;case ot.Binary:return new rr;case ot.Utf8:return new ir;case ot.Bool:return new sr;case ot.List:return new ur((t||[])[0]);case ot.Struct_:return new gt(t||[])}switch(e){case ot.Int:{const r=n.type(new Mt);return new Ie(r.isSigned(),r.bitWidth())}case ot.FloatingPoint:{const r=n.type(new Qt);return new Rn(r.precision())}case ot.Decimal:{const r=n.type(new At);return new or(r.scale(),r.precision(),r.bitWidth())}case ot.Date:{const r=n.type(new Sr);return new ar(r.unit())}case ot.Time:{const r=n.type(new Pt);return new Mn(r.unit(),r.bitWidth())}case ot.Timestamp:{const r=n.type(new kt);return new cr(r.unit(),r.timezone())}case ot.Interval:{const r=n.type(new te);return new lr(r.unit())}case ot.Union:{const r=n.type(new Bt);return new dr(r.mode(),r.typeIdsArray()||[],t||[])}case ot.FixedSizeBinary:{const r=n.type(new Zt);return new hr(r.byteWidth())}case ot.FixedSizeList:{const r=n.type(new Xt);return new fr(r.listSize(),(t||[])[0])}case ot.Map:{const r=n.type(new Br);return new pr((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ot[e]}" (${e})`)}function Tu(n,t){const e=t.fields.map(s=>rt.encode(n,s));ee.startFieldsVector(n,e.length);const r=ee.createFieldsVector(n,e),i=t.metadata&&t.metadata.size>0?ee.createCustomMetadataVector(n,[...t.metadata].map(([s,o])=>{const a=n.createString(`${s}`),c=n.createString(`${o}`);return ft.startKeyValue(n),ft.addKey(n,a),ft.addValue(n,c),ft.endKeyValue(n)})):-1;return ee.startSchema(n),ee.addFields(n,r),ee.addEndianness(n,Cu?an.Little:an.Big),i!==-1&&ee.addCustomMetadata(n,i),ee.endSchema(n)}function Eu(n,t){let e=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;A.isDictionary(s)?(o=s.dictionary.typeId,i=Ui.visit(s,n),r=Ui.visit(s.dictionary,n)):r=Ui.visit(s,n);const a=(s.children||[]).map(h=>rt.encode(n,h)),c=jt.createChildrenVector(n,a),d=t.metadata&&t.metadata.size>0?jt.createCustomMetadataVector(n,[...t.metadata].map(([h,f])=>{const m=n.createString(`${h}`),_=n.createString(`${f}`);return ft.startKeyValue(n),ft.addKey(n,m),ft.addValue(n,_),ft.endKeyValue(n)})):-1;return t.name&&(e=n.createString(t.name)),jt.startField(n),jt.addType(n,r),jt.addTypeType(n,o),jt.addChildren(n,c),jt.addNullable(n,!!t.nullable),e!==-1&&jt.addName(n,e),i!==-1&&jt.addDictionary(n,i),d!==-1&&jt.addCustomMetadata(n,d),jt.endField(n)}function xu(n,t){const e=t.nodes||[],r=t.buffers||[];me.startNodesVector(n,e.length);for(const o of e.slice().reverse())$e.encode(n,o);const i=n.endVector();me.startBuffersVector(n,r.length);for(const o of r.slice().reverse())ie.encode(n,o);const s=n.endVector();return me.startRecordBatch(n),me.addLength(n,new Ve(t.length,0)),me.addNodes(n,i),me.addBuffers(n,s),me.endRecordBatch(n)}function Ru(n,t){const e=Ct.encode(n,t.data);return hn.startDictionaryBatch(n),hn.addId(n,new Ve(t.id,0)),hn.addIsDelta(n,t.isDelta),hn.addData(n,e),hn.endDictionaryBatch(n)}function Mu(n,t){return ra.createFieldNode(n,new Ve(t.length,0),new Ve(t.nullCount,0))}function Nu(n,t){return na.createBuffer(n,new Ve(t.offset,0),new Ve(t.length,0))}const Cu=(()=>{const n=new ArrayBuffer(2);return new DataView(n).setInt16(0,256,!0),new Int16Array(n)[0]===256})(),Pi=n=>`Expected ${J[n]} Message in stream, but was null or length 0.`,ki=n=>`Header pointer of flatbuffer-encoded ${J[n]} Message is null or length 0.`,fa=(n,t)=>`Expected to read ${n} metadata bytes, but only read ${t}.`,pa=(n,t)=>`Expected to read ${n} bytes for message body, but only read ${t}.`;class ya{constructor(t){this.source=t instanceof Tr?t:new Tr(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||t.value===-1&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?at:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(Pi(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=z(this.source.read(t));if(e.byteLength<t)throw new Error(pa(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=J.Schema,r=this.readMessage(e),i=r==null?void 0:r.header();if(t&&!i)throw new Error(ki(e));return i}readMetadataLength(){const t=this.source.read(Ur),e=t&&new sn(t),r=(e==null?void 0:e.readInt32(0))||0;return{done:r===0,value:r}}readMetadata(t){const e=this.source.read(t);if(!e)return at;if(e.byteLength<t)throw new Error(fa(t,e.byteLength));return{done:!1,value:_t.decode(e)}}}class Lu{constructor(t,e){this.source=t instanceof ln?t:_s(t)?new Er(t,e):new ln(t)}[Symbol.asyncIterator](){return this}next(){return S(this,void 0,void 0,function*(){let t;return(t=yield this.readMetadataLength()).done||t.value===-1&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?at:t})}throw(t){return S(this,void 0,void 0,function*(){return yield this.source.throw(t)})}return(t){return S(this,void 0,void 0,function*(){return yield this.source.return(t)})}readMessage(t){return S(this,void 0,void 0,function*(){let e;if((e=yield this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(Pi(t));return e.value})}readMessageBody(t){return S(this,void 0,void 0,function*(){if(t<=0)return new Uint8Array(0);const e=z(yield this.source.read(t));if(e.byteLength<t)throw new Error(pa(t,e.byteLength));return e.byteOffset%8===0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()})}readSchema(t=!1){return S(this,void 0,void 0,function*(){const e=J.Schema,r=yield this.readMessage(e),i=r==null?void 0:r.header();if(t&&!i)throw new Error(ki(e));return i})}readMetadataLength(){return S(this,void 0,void 0,function*(){const t=yield this.source.read(Ur),e=t&&new sn(t),r=(e==null?void 0:e.readInt32(0))||0;return{done:r===0,value:r}})}readMetadata(t){return S(this,void 0,void 0,function*(){const e=yield this.source.read(t);if(!e)return at;if(e.byteLength<t)throw new Error(fa(t,e.byteLength));return{done:!1,value:_t.decode(e)}})}}class Uu extends ya{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof qo?t:new qo(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:_t.fromJSON(t.schema,J.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:_t.fromJSON(e,J.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:_t.fromJSON(e,J.RecordBatch)}}return this._body=[],at}readMessageBody(t){return e(this._body);function e(r){return(r||[]).reduce((i,s)=>[...i,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE&&[s.TYPE]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...e(s.children)],[])}}readMessage(t){let e;if((e=this.next()).done)return null;if(t!=null&&e.value.headerType!==t)throw new Error(Pi(t));return e.value}readSchema(){const t=J.Schema,e=this.readMessage(t),r=e==null?void 0:e.header();if(!e||!r)throw new Error(ki(t));return r}}const Ur=4,ji="ARROW1",kn=new Uint8Array(ji.length);for(let n=0;n<ji.length;n+=1)kn[n]=ji.codePointAt(n);function Vi(n,t=0){for(let e=-1,r=kn.length;++e<r;)if(kn[e]!==n[t+e])return!1;return!0}const jn=kn.length,ma=jn+Ur,Pu=jn*2+Ur;class ge extends Ti{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return ve(e)?e.then(()=>this):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Lt.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Lt.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof ge?t:ii(t)?$u(t):_s(t)?Wu(t):ve(t)?S(this,void 0,void 0,function*(){return yield ge.from(yield t)}):vs(t)||si(t)||ws(t)||qe(t)?Yu(new ln(t)):zu(new Tr(t))}static readAll(t){return t instanceof ge?t.isSync()?wa(t):Sa(t):ii(t)||ArrayBuffer.isView(t)||Fn(t)||bs(t)?wa(t):Sa(t)}}class Pr extends ge{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Ht(this,arguments,function*(){yield M(yield*tr(Re(this[Symbol.iterator]())))})}}class kr extends ge{constructor(t){super(t),this._impl=t}readAll(){var t,e;return S(this,void 0,void 0,function*(){const r=new Array;try{for(var i=Re(this),s;s=yield i.next(),!s.done;){const o=s.value;r.push(o)}}catch(o){t={error:o}}finally{try{s&&!s.done&&(e=i.return)&&(yield e.call(i))}finally{if(t)throw t.error}}return r})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class ga extends Pr{constructor(t){super(t),this._impl=t}}class ku extends kr{constructor(t){super(t),this._impl=t}}class ba{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const r=this._loadVectors(t,e,this.schema.fields),i=k({type:new gt(this.schema.fields),length:t.length,children:r});return new Dt(this.schema,i)}_loadDictionaryBatch(t,e){const{id:r,isDelta:i}=t,{dictionaries:s,schema:o}=this,a=s.get(r);if(i||!a){const c=o.dictionaries.get(r),d=this._loadVectors(t.data,e,[c]);return(a&&i?a.concat(new q(d)):new q(d)).memoize()}return a.memoize()}_loadVectors(t,e,r){return new Zo(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}class jr extends ba{constructor(t,e){super(e),this._reader=ii(t)?new Uu(this._handle=t):new ya(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=va(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):at}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):at}next(){if(this.closed)return at;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Li(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class Vr extends ba{constructor(t,e){super(e),this._reader=new Lu(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return S(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(t){return S(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=va(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(t){return S(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):at})}return(t){return S(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):at})}next(){return S(this,void 0,void 0,function*(){if(this.closed)return at;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else if(t.isRecordBatch()){this._recordBatchIndex++;const r=t.header(),i=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(r,i)}}else if(t.isDictionaryBatch()){this._dictionaryIndex++;const r=t.header(),i=yield e.readMessageBody(t.bodyLength),s=this._loadDictionaryBatch(r,i);this.dictionaries.set(r.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new Li(this.schema)}):yield this.return()})}_readNextMessageAndValidate(t){return S(this,void 0,void 0,function*(){return yield this._reader.readMessage(t)})}}class _a extends jr{constructor(t,e){super(t instanceof Ko?t:new Ko(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const r=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(J.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(t){var e;const r=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(r&&this._handle.seek(r.offset)){const i=this._reader.readMessage(J.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}}_readFooter(){const{_handle:t}=this,e=t.size-ma,r=t.readInt32(e),i=t.readAt(e-r,r);return Cn.decode(i)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const r=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(this._recordBatchIndex);if(r&&this._handle.seek(r.offset))return this._reader.readMessage(t)}return null}}class ju extends Vr{constructor(t,...e){const r=typeof e[0]!="number"?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof Er?t:new Er(t,r),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return S(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const r of this._footer.dictionaryBatches())r&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)})}readRecordBatch(t){var e;return S(this,void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());const r=(e=this._footer)===null||e===void 0?void 0:e.getRecordBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(J.RecordBatch);if(i!=null&&i.isRecordBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(t){var e;return S(this,void 0,void 0,function*(){const r=(e=this._footer)===null||e===void 0?void 0:e.getDictionaryBatch(t);if(r&&(yield this._handle.seek(r.offset))){const i=yield this._reader.readMessage(J.DictionaryBatch);if(i!=null&&i.isDictionaryBatch()){const s=i.header(),o=yield this._reader.readMessageBody(i.bodyLength),a=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,a)}}})}_readFooter(){return S(this,void 0,void 0,function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-ma,r=yield t.readInt32(e),i=yield t.readAt(e-r,r);return Cn.decode(i)})}_readNextMessageAndValidate(t){return S(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null})}}class Vu extends jr{constructor(t,e){super(t,e)}_loadVectors(t,e,r){return new Ql(e,t.nodes,t.buffers,this.dictionaries).visitMany(r)}}function va(n,t){return t&&typeof t.autoDestroy=="boolean"?t.autoDestroy:n.autoDestroy}function*wa(n){const t=ge.from(n);try{if(!t.open({autoDestroy:!1}).closed)do yield t;while(!t.reset().open().closed)}finally{t.cancel()}}function Sa(n){return Ht(this,arguments,function*(){const e=yield M(ge.from(n));try{if(!(yield M(e.open({autoDestroy:!1}))).closed)do yield yield M(e);while(!(yield M(e.reset().open())).closed)}finally{yield M(e.cancel())}})}function $u(n){return new Pr(new Vu(n))}function zu(n){const t=n.peek(jn+7&-8);return t&&t.byteLength>=4?Vi(t)?new ga(new _a(n.read())):new Pr(new jr(n)):new Pr(new jr(function*(){}()))}function Yu(n){return S(this,void 0,void 0,function*(){const t=yield n.peek(jn+7&-8);return t&&t.byteLength>=4?Vi(t)?new ga(new _a(yield n.read())):new kr(new Vr(n)):new kr(new Vr(function(){return Ht(this,arguments,function*(){})}()))})}function Wu(n){return S(this,void 0,void 0,function*(){const{size:t}=yield n.stat(),e=new Er(n,t);return t>=Pu&&Vi(yield e.readAt(0,jn+7&-8))?new ku(new ju(e)):new kr(new Vr(e))})}class lt extends P{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=i=>i.flatMap(s=>Array.isArray(s)?e(s):s instanceof Dt?s.data.children:s.data),r=new lt;return r.visitMany(e(t)),r}visit(t){if(t instanceof q)return this.visitMany(t.data),this;const{type:e}=t;if(!A.isDictionary(e)){const{length:r,nullCount:i}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");A.isNull(e)||Yt.call(this,i<=0?new Uint8Array(0):bi(t.offset,r,t.nullBitmap)),this.nodes.push(new $e(r,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Yt(n){const t=n.byteLength+7&-8;return this.buffers.push(n),this.bufferRegions.push(new ie(this._byteLength,t)),this._byteLength+=t,this}function Hu(n){const{type:t,length:e,typeIds:r,valueOffsets:i}=n;if(Yt.call(this,r),t.mode===Rt.Sparse)return zi.call(this,n);if(t.mode===Rt.Dense){if(n.offset<=0)return Yt.call(this,i),zi.call(this,n);{const s=r.reduce((h,f)=>Math.max(h,f),r[0]),o=new Int32Array(s+1),a=new Int32Array(s+1).fill(-1),c=new Int32Array(e),d=ci(-i[0],e,i);for(let h,f,m=-1;++m<e;)(f=a[h=r[m]])===-1&&(f=a[h]=d[h]),c[m]=d[m]-f,++o[h];Yt.call(this,c);for(let h,f=-1,m=t.children.length;++f<m;)if(h=n.children[f]){const _=t.typeIds[f],C=Math.min(e,o[_]);this.visit(h.slice(a[_],C))}}}return this}function Ju(n){let t;return n.nullCount>=n.length?Yt.call(this,new Uint8Array(0)):(t=n.values)instanceof Uint8Array?Yt.call(this,bi(n.offset,n.length,t)):Yt.call(this,mr(n.values))}function xe(n){return Yt.call(this,n.values.subarray(0,n.length*n.stride))}function Ia(n){const{length:t,values:e,valueOffsets:r}=n,i=r[0],s=r[t],o=Math.min(s-i,e.byteLength-i);return Yt.call(this,ci(-r[0],t,r)),Yt.call(this,e.subarray(i,i+o)),this}function $i(n){const{length:t,valueOffsets:e}=n;return e&&Yt.call(this,ci(e[0],t,e)),this.visit(n.children[0])}function zi(n){return this.visitMany(n.type.children.map((t,e)=>n.children[e]).filter(Boolean))[0]}lt.prototype.visitBool=Ju,lt.prototype.visitInt=xe,lt.prototype.visitFloat=xe,lt.prototype.visitUtf8=Ia,lt.prototype.visitBinary=Ia,lt.prototype.visitFixedSizeBinary=xe,lt.prototype.visitDate=xe,lt.prototype.visitTimestamp=xe,lt.prototype.visitTime=xe,lt.prototype.visitDecimal=xe,lt.prototype.visitList=$i,lt.prototype.visitStruct=zi,lt.prototype.visitUnion=Hu,lt.prototype.visitInterval=xe,lt.prototype.visitFixedSizeList=$i,lt.prototype.visitMap=$i;class Aa extends Ti{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Dr,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,wt(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return ve(t)?t.then(e=>this.writeAll(e)):qe(t)?Ji(this,t):Hi(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){return t===this._sink||t instanceof Dr?this._sink=t:(this._sink=new Dr,t&&pc(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&yc(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!e||!Ni(e,this._schema))&&(e==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof bt&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof Dt&&!(e=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(e&&!Ni(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof Dt?t instanceof Li||this._writeRecordBatch(t):t instanceof bt?this.writeAll(t.batches):Fn(t)&&this.writeAll(t)}_writeMessage(t,e=8){const r=e-1,i=_t.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,c=a-s-o;return t.headerType===J.RecordBatch?this._recordBatchBlocks.push(new Fe(a,t.bodyLength,this._position)):t.headerType===J.DictionaryBatch&&this._dictionaryBlocks.push(new Fe(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(c)}_write(t){if(this._started){const e=z(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(_t.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(kn)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:r,bufferRegions:i,buffers:s}=lt.assemble(t),o=new Ct(t.numRows,r,i),a=_t.from(o,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,e,r=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=lt.assemble(new q([t])),c=new Ct(t.length,s,o),d=new re(c,e,r),h=_t.from(d,i);return this._writeMessage(h)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,r,i;for(let s=-1,o=t.length;++s<o;)(e=t[s])&&(r=e.byteLength)>0&&(this._write(e),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(e)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,e,i>0),i+=s.length}return this}}class Yi extends Aa{static writeAll(t,e){const r=new Yi(e);return ve(t)?t.then(i=>r.writeAll(i)):qe(t)?Ji(r,t):Hi(r,t)}}class Wi extends Aa{static writeAll(t){const e=new Wi;return ve(t)?t.then(r=>e.writeAll(r)):qe(t)?Ji(e,t):Hi(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Cn.encode(new Cn(t,xt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Hi(n,t){let e=t;t instanceof bt&&(e=t.batches,n.reset(void 0,t.schema));for(const r of e)n.write(r);return n.finish()}function Ji(n,t){var e,r,i,s;return S(this,void 0,void 0,function*(){try{for(e=Re(t);r=yield e.next(),!r.done;){const o=r.value;n.write(o)}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=e.return)&&(yield s.call(e))}finally{if(i)throw i.error}}return n.finish()})}function Vn(n){const t=ge.from(n);return ve(t)?t.then(e=>Vn(e)):t.isAsync()?t.readAll().then(e=>new bt(e)):new bt(t.readAll())}function qi(n,t="stream"){return(t==="stream"?Yi:Wi).writeAll(n).toUint8Array(!0)}var Ba=function(){function n(t,e,r,i){var s=this;this.getCell=function(o,a){var c=o<s.headerRows&&a<s.headerColumns,d=o>=s.headerRows&&a<s.headerColumns,h=o<s.headerRows&&a>=s.headerColumns;if(c){var f=["blank"];return a>0&&f.push("level"+o),{type:"blank",classNames:f.join(" "),content:""}}else if(h){var m=a-s.headerColumns,f=["col_heading","level"+o,"col"+m];return{type:"columns",classNames:f.join(" "),content:s.getContent(s.columnsTable,m,o)}}else if(d){var _=o-s.headerRows,f=["row_heading","level"+a,"row"+_];return{type:"index",id:"T_".concat(s.uuid,"level").concat(a,"_row").concat(_),classNames:f.join(" "),content:s.getContent(s.indexTable,_,a)}}else{var _=o-s.headerRows,m=a-s.headerColumns,f=["data","row"+_,"col"+m],C=s.styler?s.getContent(s.styler.displayValuesTable,_,m):s.getContent(s.dataTable,_,m);return{type:"data",id:"T_".concat(s.uuid,"row").concat(_,"_col").concat(m),classNames:f.join(" "),content:C}}},this.getContent=function(o,a,c){var d=o.getChildAt(c);if(d===null)return"";var h=s.getColumnTypeId(o,c);switch(h){case u.Timestamp:return s.nanosToDate(d.get(a));default:return d.get(a)}},this.dataTable=Vn(t),this.indexTable=Vn(e),this.columnsTable=Vn(r),this.styler=i?{caption:i.caption,displayValuesTable:Vn(i.displayValues),styles:i.styles,uuid:i.uuid}:void 0}return Object.defineProperty(n.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return{data:qi(this.dataTable),index:qi(this.indexTable),columns:qi(this.columnsTable)}},n.prototype.getColumnTypeId=function(t,e){return t.schema.fields[e].type.typeId},n.prototype.nanosToDate=function(t){return new Date(t/1e6)},n}(),$n=function(){return $n=Object.assign||function(n){for(var t,e=1,r=arguments.length;e<r;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$n.apply(this,arguments)},zn;(function(n){n.COMPONENT_READY="streamlit:componentReady",n.SET_COMPONENT_VALUE="streamlit:setComponentValue",n.SET_FRAME_HEIGHT="streamlit:setFrameHeight"})(zn||(zn={}));var Wt=function(){function n(){}return n.API_VERSION=1,n.RENDER_EVENT="streamlit:render",n.events=new EventTarget,n.registeredMessageListener=!1,n.setComponentReady=function(){n.registeredMessageListener||(window.addEventListener("message",n.onMessageEvent),n.registeredMessageListener=!0),n.sendBackMsg(zn.COMPONENT_READY,{apiVersion:n.API_VERSION})},n.setFrameHeight=function(t){t===void 0&&(t=document.body.scrollHeight),t!==n.lastFrameHeight&&(n.lastFrameHeight=t,n.sendBackMsg(zn.SET_FRAME_HEIGHT,{height:t}))},n.setComponentValue=function(t){var e;t instanceof Ba?(e="dataframe",t=t.serialize()):Ku(t)?(e="bytes",t=new Uint8Array(t.buffer)):t instanceof ArrayBuffer?(e="bytes",t=new Uint8Array(t)):e="json",n.sendBackMsg(zn.SET_COMPONENT_VALUE,{value:t,dataType:e})},n.onMessageEvent=function(t){var e=t.data.type;switch(e){case n.RENDER_EVENT:n.onRenderMessage(t.data);break}},n.onRenderMessage=function(t){var e=t.args;e==null&&(console.error("Got null args in onRenderMessage. This should never happen"),e={});var r=t.dfs&&t.dfs.length>0?n.argsDataframeToObject(t.dfs):{};e=$n($n({},e),r);var i=!!t.disabled,s=t.theme;s&&qu(s);var o={disabled:i,args:e,theme:s},a=new CustomEvent(n.RENDER_EVENT,{detail:o});n.events.dispatchEvent(a)},n.argsDataframeToObject=function(t){var e=t.map(function(r){var i=r.key,s=r.value;return[i,n.toArrowTable(s)]});return Object.fromEntries(e)},n.toArrowTable=function(t){var e,r=(e=t.data,e.data),i=e.index,s=e.columns,o=e.styler;return new Ba(r,i,s,o)},n.sendBackMsg=function(t,e){window.parent.postMessage($n({isStreamlitMessage:!0,type:t},e),"*")},n}(),qu=function(n){var t=document.createElement("style");document.head.appendChild(t),t.innerHTML=`
    :root {
      --primary-color: `.concat(n.primaryColor,`;
      --background-color: `).concat(n.backgroundColor,`;
      --secondary-background-color: `).concat(n.secondaryBackgroundColor,`;
      --text-color: `).concat(n.textColor,`;
      --font: `).concat(n.font,`;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
    }
  `)};function Ku(n){var t=!1;try{t=n instanceof BigInt64Array||n instanceof BigUint64Array}catch{}return n instanceof Int8Array||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int16Array||n instanceof Uint16Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Float32Array||n instanceof Float64Array||t}var Oa=function(){var n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},n(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");n(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();(function(n){Oa(t,n);function t(){return n!==null&&n.apply(this,arguments)||this}return t.prototype.componentDidMount=function(){Wt.setFrameHeight()},t.prototype.componentDidUpdate=function(){Wt.setFrameHeight()},t})(V.PureComponent);function Fa(n){var t=function(e){Oa(r,e);function r(i){var s=e.call(this,i)||this;return s.componentDidMount=function(){Wt.events.addEventListener(Wt.RENDER_EVENT,s.onRenderEvent),Wt.setComponentReady()},s.componentDidUpdate=function(){s.state.componentError!=null&&Wt.setFrameHeight()},s.componentWillUnmount=function(){Wt.events.removeEventListener(Wt.RENDER_EVENT,s.onRenderEvent)},s.onRenderEvent=function(o){s.setState({renderData:o.detail})},s.state={renderData:void 0,componentError:void 0},s}return r.prototype.render=function(){return this.state.componentError!=null?V.createElement("div",null,V.createElement("h1",null,"Component Error"),V.createElement("span",null,this.state.componentError.message)):this.state.renderData==null?null:V.createElement(n,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},r.getDerivedStateFromError=function(i){return{componentError:i}},r}(V.PureComponent);return lc(t,n)}function Gu(){const n={iceServers:[{urls:"stun:stun.l.google.com:19302"}]};return new RTCPeerConnection(n)}async function Zu(){try{const n={audio:{echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,sampleRate:24e3},video:!1},t=await navigator.mediaDevices.getUserMedia(n);if(!t.getAudioTracks().length)throw new Error("No audio tracks found in stream");return t}catch(n){throw console.error("Failed to access microphone:",n),n}}async function Xu(n,t){try{const e=await n.createOffer();await n.setLocalDescription(e);const r=await fetch("https://api.openai.com/v1/realtime?model=gpt-4o-realtime-preview-2024-12-17",{method:"POST",headers:{Authorization:`Bearer ${t.apiKey}`,"Content-Type":"application/sdp"},body:e.sdp});if(!r.ok){const o=await r.text();throw new Error(`OpenAI API error: ${r.status} - ${o}`)}const s={type:"answer",sdp:await r.text()};await n.setRemoteDescription(s)}catch(e){throw console.error("Failed to establish OpenAI connection:",e),e}}function Qu(n,t=1e4){return new Promise((e,r)=>{const i=setTimeout(()=>{r(new Error(`Connection timeout after ${t}ms. Current state: ${n.connectionState}`))},t),s=()=>{n.connectionState==="connected"?(clearTimeout(i),e()):(n.connectionState==="failed"||n.connectionState==="closed")&&(clearTimeout(i),r(new Error(`Connection failed. State: ${n.connectionState}`)))};n.addEventListener("connectionstatechange",s),s()})}function td(n){return n.createDataChannel("oai-events",{ordered:!0})}function ed(n,t=5e3){return new Promise((e,r)=>{if(n.readyState==="open"){e();return}const i=setTimeout(()=>{r(new Error(`Data channel timeout after ${t}ms. State: ${n.readyState}`))},t),s=()=>{clearTimeout(i),n.removeEventListener("open",s),e()},o=()=>{clearTimeout(i),n.removeEventListener("error",o),r(new Error("Data channel error"))};n.addEventListener("open",s),n.addEventListener("error",o)})}function Da(n,t="unknown"){return n instanceof Error?n.name==="NotAllowedError"||n.message.includes("permission")?{type:"permission",message:"Microphone permission denied. Please allow microphone access and try again.",details:n}:n.name==="NotFoundError"||n.message.includes("device")?{type:"device",message:"No microphone device found. Please check your audio devices.",details:n}:n.message.includes("network")||n.message.includes("connection")?{type:"connection",message:"Network connection error. Please check your internet connection.",details:n}:n.message.includes("API")||n.message.includes("401")||n.message.includes("403")?{type:"api",message:"OpenAI API error. Please check your API key and try again.",details:n}:{type:t,message:n.message,details:n}:{type:t,message:"An unknown error occurred",details:n}}function nd(n,t,e){try{e&&e.getTracks().forEach(r=>{r.stop()}),t&&t.readyState==="open"&&t.close(),n&&n.connectionState!=="closed"&&n.close()}catch(r){console.error("Error during cleanup:",r)}}let $r;const rd=new Uint8Array(16);function id(){if(!$r&&($r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $r(rd)}const yt=[];for(let n=0;n<256;++n)yt.push((n+256).toString(16).slice(1));function sd(n,t=0){return yt[n[t+0]]+yt[n[t+1]]+yt[n[t+2]]+yt[n[t+3]]+"-"+yt[n[t+4]]+yt[n[t+5]]+"-"+yt[n[t+6]]+yt[n[t+7]]+"-"+yt[n[t+8]]+yt[n[t+9]]+"-"+yt[n[t+10]]+yt[n[t+11]]+yt[n[t+12]]+yt[n[t+13]]+yt[n[t+14]]+yt[n[t+15]]}const Ta={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function zr(n,t,e){if(Ta.randomUUID&&!n)return Ta.randomUUID();n=n||{};const r=n.random||(n.rng||id)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,sd(r)}function od(n){return{type:"session.update",session:{instructions:n.instructions,voice:n.voice,input_audio_transcription:{model:"whisper-1"},turn_detection:{type:"server_vad",threshold:n.turnDetectionThreshold,prefix_padding_ms:300,silence_duration_ms:200,create_response:!0,interrupt_response:!0},temperature:n.temperature}}}function ad(n){return{type:"response.create",response:{modalities:["text","audio"],instructions:n||"Say a brief friendly greeting to start the conversation."}}}function Ea(){return{type:"response.cancel"}}function Yr(n,t){if(!n){console.warn("Data channel is null, cannot send event:",t.type);return}if(n.readyState==="open")try{const e=JSON.stringify(t);console.log("Sending event:",t.type,t),n.send(e)}catch(e){console.error("Failed to send event:",t.type,e)}else console.warn(`Data channel not open (state: ${n.readyState}), cannot send event:`,t.type)}function cd(n){try{const t=JSON.parse(n);return console.log("Received event:",t.type,t),t}catch(t){return console.error("Failed to parse event:",t,n),null}}let ld=0;function Wr(){return ld++}function ud(n,t){const e=[...t];switch(n.type){case"input_audio_buffer.speech_started":{if(e.findIndex(i=>i.type==="user"&&i.status==="in_progress")===-1){const i={id:n.item_id||zr(),type:"user",content:"",timestamp:Date.now(),sequence:Wr(),status:"in_progress"};console.log(`[Transcript] Placeholder user message created: sequence=${i.sequence}`),e.push(i)}break}case"conversation.item.input_audio_transcription.completed":{const r=e.findIndex(i=>i.id===n.item_id||i.type==="user"&&i.status==="in_progress");if(r>=0)e[r]={...e[r],content:n.transcript||e[r].content,status:"completed"},console.log(`[Transcript] Updated user placeholder: sequence=${e[r].sequence}, content="${n.transcript}"`);else{const i={id:n.item_id||zr(),type:"user",content:n.transcript||"",timestamp:Date.now(),sequence:Wr(),status:"completed"};console.log(`[Transcript] User message (no placeholder): sequence=${i.sequence}, content="${i.content}"`),e.push(i)}break}case"response.audio_transcript.delta":{const r=n.response_id||zr(),i=e.findIndex(s=>s.id===r);if(i>=0)e[i]={...e[i],content:e[i].content+(n.delta||""),status:"in_progress"};else{const s={id:r,type:"assistant",content:n.delta||"",timestamp:Date.now(),sequence:Wr(),status:"in_progress"};console.log(`[Transcript] Assistant message: sequence=${s.sequence}, content="${s.content}"`),e.push(s)}break}case"response.audio_transcript.done":{const r=n.response_id||zr(),i=e.findIndex(s=>s.id===r);if(i>=0)e[i]={...e[i],content:n.transcript||e[i].content,status:"completed"};else{const s={id:r,type:"assistant",content:n.transcript||"",timestamp:Date.now(),sequence:Wr(),status:"completed"};console.log(`[Transcript] Assistant message completed: sequence=${s.sequence}, content="${s.content}"`),e.push(s)}break}default:return t}return e}function dd(n){switch(n.type){case"session.created":return"connected";case"input_audio_buffer.speech_started":return"recording";case"input_audio_buffer.speech_stopped":return"connected";case"response.audio_transcript.delta":case"response.audio.delta":return"speaking";case"response.done":return"connected";case"error":return"error";default:return null}}function hd(n){var t;return n.type==="session.created"&&((t=n.session)!=null&&t.id)?n.session.id:null}function fd(n){return n.type==="error"||n.error&&n.error.type||n.type.includes("error")}function pd(n){const t=xa(n);return t.includes("Cancellation failed")||t.includes("no active response")||t.includes("cancellation")}function xa(n){var t;return(t=n.error)!=null&&t.message?n.error.message:n.message?n.message:`Unknown error: ${n.type}`}function yd(n,t,e,r,i){let s=[],o=!1;return{handleEvent:a=>{if(console.log(`[Event] Processing event: ${a.type}`,a),fd(a)){const m=xa(a);if(pd(a)){console.log("Ignoring cancellation error:",m);return}r(m),t("error");return}const c=hd(a);c&&e(c);const d=dd(a);d&&t(d);const h=o;a.type==="response.audio_transcript.delta"||a.type==="response.audio.delta"?o=!0:(a.type==="response.done"||a.type==="response.audio_transcript.done")&&(o=!1),h!==o&&i(o);const f=ud(a,s);f!==s&&(console.log("[Transcript] Updated transcript:",f.map(m=>({type:m.type,sequence:m.sequence,content:m.content.substring(0,50)+"..."}))),s=f,n(f))},clearTranscript:()=>{s=[],n(s)}}}const md=Fa(({args:n,disabled:t})=>{const{prompt:e="",apiKey:r="",voice:i="alloy",instructions:s="You are a helpful AI assistant.",autoStart:o=!1,temperature:a=.8,turnDetectionThreshold:c=.5,showTranscript:d=!1,title:h="Real-time Audio Conversation"}=n,[f,m]=V.useState({status:"idle",isRecording:!1,isPaused:!1,transcript:[],error:null,sessionId:null,connectionState:"new"}),[_,C]=V.useState(!1),pt=V.useRef(null),mt=V.useRef(null),X=V.useRef(null),it=V.useRef(null),ut=V.useRef(yd(y=>{m(v=>({...v,transcript:y})),j(v=>({...v,transcript:y}))},y=>{m(v=>({...v,status:y})),j(v=>({...v,status:y}))},y=>{m(v=>({...v,sessionId:y})),j(v=>({...v,session_id:y}))},y=>{m(v=>({...v,error:y,status:"error"})),j(v=>({...v,error:y,status:"error"}))},y=>{C(y)})),j=V.useCallback(y=>{m(v=>{const st=y(v);return Wt.setComponentValue({transcript:st.transcript||v.transcript,status:st.status||v.status,error:st.error??v.error,session_id:st.sessionId||st.session_id||v.sessionId,connection_state:st.connectionState||v.connectionState,is_recording:st.isRecording??v.isRecording,is_paused:st.isPaused??v.isPaused}),st})},[]);V.useEffect(()=>{const st=220+(d?200:0);Wt.setFrameHeight(st),Wt.setComponentReady()},[d]);const g=V.useCallback(()=>{if(pt.current){const y=pt.current.connectionState;m(v=>({...v,connectionState:y})),j(v=>({...v,connection_state:y}))}},[j]),se=V.useCallback(y=>{console.log("Received remote track:",y.track.kind),y.track.kind==="audio"&&it.current&&(it.current.srcObject=y.streams[0])},[]),fn=V.useCallback(y=>{const v=cd(y.data);v&&ut.current.handleEvent(v)},[]),ze=V.useCallback(async()=>{if(!r){const y=Da(new Error("API key is required"),"api");m(v=>({...v,error:y.message,status:"error"}));return}try{m(Tt=>({...Tt,status:"connecting",error:null})),j(Tt=>({...Tt,status:"connecting",error:null})),console.log("Requesting microphone access...");const y=await Zu();X.current=y,console.log("Creating peer connection...");const v=Gu();pt.current=v,v.addEventListener("connectionstatechange",g),v.addEventListener("track",se);const st=y.getAudioTracks()[0];v.addTrack(st,y),console.log("Creating data channel...");const oe=td(v);mt.current=oe,oe.addEventListener("message",fn),console.log("Establishing connection with OpenAI...");const Ye={apiKey:r,voice:i,instructions:s,temperature:a,turnDetectionThreshold:c};await Xu(v,Ye),console.log("Waiting for connection..."),await Qu(v),console.log("Waiting for data channel..."),await ed(oe),console.log("Connection established!");const We=od(Ye);if(Yr(oe,We),e){const Tt=ad(e);Yr(oe,Tt)}m(Tt=>({...Tt,status:"connected"})),j(Tt=>({...Tt,status:"connected"}))}catch(y){console.error("Failed to start conversation:",y);const v=Da(y);m(st=>({...st,error:v.message,status:"error"})),j(st=>({...st,error:v.message,status:"error"})),be()}},[r,i,s,a,c,e,g,se,fn,j]);V.useCallback(()=>{if(console.log("Stopping conversation..."),mt.current&&_){const y=Ea();Yr(mt.current,y)}X.current&&f.isPaused&&X.current.getTracks().forEach(y=>{y.enabled=!0}),be(),m(y=>({...y,status:"idle",isRecording:!1,isPaused:!1,connectionState:"closed"})),C(!1),j(y=>({...y,status:"idle",is_recording:!1,is_paused:!1,connection_state:"closed"}))},[j,_,f.isPaused]);const pn=V.useCallback(()=>{if(console.log("Pausing conversation..."),mt.current&&_){const y=Ea();Yr(mt.current,y)}X.current&&X.current.getTracks().forEach(y=>{y.enabled=!1}),m(y=>({...y,isPaused:!0,isRecording:!1})),j(y=>({...y,is_paused:!0,is_recording:!1}))},[j,_]),Yn=V.useCallback(()=>{console.log("Resuming conversation..."),X.current&&X.current.getTracks().forEach(y=>{y.enabled=!0}),m(y=>({...y,isPaused:!1})),j(y=>({...y,is_paused:!1}))},[j]),Wn=V.useCallback(()=>{ut.current.clearTranscript()},[]),be=V.useCallback(()=>{nd(pt.current,mt.current,X.current),pt.current=null,mt.current=null,X.current=null,C(!1)},[]);return V.useEffect(()=>be,[be]),V.useEffect(()=>{o&&r&&f.status==="idle"&&ze()},[o,r,f.status,ze]),U.jsxs("div",{style:{padding:"20px",fontFamily:"sans-serif"},children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",padding:"10px",backgroundColor:"#f0f2f6",borderRadius:"8px"},children:[U.jsxs("div",{children:[U.jsx("h3",{style:{margin:0,color:"#262730"},children:h}),U.jsxs("p",{style:{margin:"5px 0 0 0",color:"#666",fontSize:"14px"},children:["Status: ",U.jsx("strong",{children:f.status})]})]}),U.jsxs("div",{style:{display:"flex",gap:"10px"},children:[f.status==="idle"&&U.jsx("button",{onClick:ze,disabled:t||!r,style:{padding:"12px 20px",backgroundColor:"#FF4B4B",color:"white",border:"none",borderRadius:"6px",cursor:t||!r?"not-allowed":"pointer",opacity:t||!r?.5:1,fontSize:"14px",fontWeight:"500"},children:"Start Conversation"}),f.status!=="idle"&&f.status!=="error"&&U.jsx(U.Fragment,{children:f.isPaused?U.jsx("button",{onClick:Yn,disabled:t,style:{padding:"12px 20px",backgroundColor:"#00D4AA",color:"white",border:"none",borderRadius:"6px",cursor:t?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500"},children:"Resume"}):U.jsx("button",{onClick:pn,disabled:t,style:{padding:"12px 20px",backgroundColor:"#FFA500",color:"white",border:"none",borderRadius:"6px",cursor:t?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500"},children:"Pause"})})]})]}),f.error&&U.jsxs("div",{style:{padding:"10px",backgroundColor:"#FFE6E6",border:"1px solid #FF4B4B",borderRadius:"4px",marginBottom:"20px",color:"#D63031"},children:[U.jsx("strong",{children:"Error:"})," ",f.error]}),U.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"20px",fontSize:"14px"},children:[U.jsxs("div",{children:["Connection: ",U.jsx("span",{style:{color:f.connectionState==="connected"?"#00D4AA":"#666"},children:f.connectionState})]}),U.jsxs("div",{children:["Recording: ",U.jsx("span",{style:{color:f.isRecording?"#FF4B4B":"#666"},children:f.isRecording?"Yes":"No"})]}),U.jsxs("div",{children:["Paused: ",U.jsx("span",{style:{color:f.isPaused?"#FFA500":"#666"},children:f.isPaused?"Yes":"No"})]})]}),d&&U.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"8px",padding:"15px",minHeight:"200px",maxHeight:"300px",overflowY:"auto",backgroundColor:"#fafafa"},children:[U.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[U.jsx("h4",{style:{margin:0,color:"#262730"},children:"Conversation Transcript"}),f.transcript.length>0&&U.jsx("button",{onClick:Wn,style:{padding:"6px 12px",fontSize:"13px",backgroundColor:"#666",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"Clear"})]}),f.transcript.length===0?U.jsx("p",{style:{color:"#666",fontStyle:"italic"},children:"No conversation yet. Start a conversation to see the transcript here."}):U.jsx("div",{children:f.transcript.sort((y,v)=>(y.sequence||0)-(v.sequence||0)).map(y=>(console.log(`[Display] ${y.type} message: sequence=${y.sequence}, content="${y.content}"`),U.jsxs("div",{style:{marginBottom:"10px",padding:"8px",borderRadius:"4px",backgroundColor:y.type==="user"?"#E3F2FD":"#F3E5F5",borderLeft:`3px solid ${y.type==="user"?"#2196F3":"#9C27B0"}`},children:[U.jsxs("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px",display:"flex",justifyContent:"space-between"},children:[U.jsx("span",{children:y.type==="user"?"You":"AI Assistant"}),U.jsxs("span",{children:[y.status==="in_progress"&&" ",new Date(y.timestamp).toLocaleTimeString()]})]}),U.jsx("div",{style:{color:"#262730"},children:y.content||(y.status==="in_progress"?"Speaking...":"")})]},y.id)))})]}),U.jsx("audio",{ref:it,autoPlay:!0,style:{display:"none"}}),U.jsx("div",{style:{marginTop:"15px",fontSize:"12px",color:"#666",fontStyle:"italic"},children:" Make sure to allow microphone access when prompted. Speak naturally and wait for the AI to respond."})]})}),Ra=Fa(md);if(typeof window<"u"){const n=document.getElementById("root");n&&Xr(n).render(U.jsx(Ra,{}))}return Ra});
